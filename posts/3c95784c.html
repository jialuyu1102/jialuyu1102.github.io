<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Request &amp;&amp; Response | JLY的小窝</title><meta name="author" content="JLY"><meta name="copyright" content="JLY"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JavaWeb、Request、Response">
<meta property="og:type" content="article">
<meta property="og:title" content="Request &amp;&amp; Response">
<meta property="og:url" content="http://example.com/posts/3c95784c.html">
<meta property="og:site_name" content="JLY的小窝">
<meta property="og:description" content="JavaWeb、Request、Response">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/6926a6804791b98c4ebe166af1429b1c.png">
<meta property="article:published_time" content="2024-08-14T11:44:46.000Z">
<meta property="article:modified_time" content="2024-08-14T11:45:52.686Z">
<meta property="article:author" content="JLY">
<meta property="article:tag" content="JavaWeb">
<meta property="article:tag" content="Request">
<meta property="article:tag" content="Response">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/6926a6804791b98c4ebe166af1429b1c.png"><link rel="shortcut icon" href="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/%E5%9B%BE%E6%A0%87.png"><link rel="canonical" href="http://example.com/posts/3c95784c.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"JY2YQT4F25","apiKey":"2fbf3647b8c7f04346c64c9ede0a0124","indexName":"hexo_blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"最后一次更新为","messageNext":"天前,文章内容可能已过期."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: true
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: JLY","link":"链接: ","source":"来源: JLY的小窝","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Request && Response',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-14 19:45:52'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/config/css/style.css?1"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="JLY的小窝" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/%E5%A4%B4%E5%83%8F.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/6926a6804791b98c4ebe166af1429b1c.png')"><nav id="nav"><span id="blog-info"><a href="/" title="JLY的小窝"><span class="site-name">JLY的小窝</span></a></span><div id="menus"></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间线</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="nav-right"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><!-- span=' '+_p('search.title')--></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Request &amp;&amp; Response</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-14T11:44:46.000Z" title="发表于 2024-08-14 19:44:46">2024-08-14</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-14T11:45:52.686Z" title="更新于 2024-08-14 19:45:52">2024-08-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java%E6%8A%80%E6%9C%AF%E6%A0%88/">Java技术栈</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">16.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>66分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Request &amp;&amp; Response"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><!-- if is_home()// #home_top--><main class="layout" id="content-inner"><div id="post"><div class="top-img gist" style="background-image: url(https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/6926a6804791b98c4ebe166af1429b1c.png)"></div><article class="post-content" id="article-container"><h2 id="1-Request和Response的概述"><a href="#1-Request和Response的概述" class="headerlink" title="1.Request和Response的概述"></a>1.Request和Response的概述</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 重点</span></span><br><span class="line"><span class="bullet">1.</span> service方法的两个参数request和response是由tomcat创建的</span><br><span class="line"><span class="code">	void service(ServletRequest var1, ServletResponse var2)</span></span><br><span class="line"><span class="code">2. request 表示请求数据, tomcat将浏览器发送过来的请求数据解析并封装到request对象中</span></span><br><span class="line"><span class="code">		servlet开发者可以通过request对象获得请求数据</span></span><br><span class="line"><span class="code">3. response 表示响应数据,服务器发送给浏览器的数据</span></span><br><span class="line"><span class="code">		servlet开发者可以通过response对象设置响应数据</span></span><br></pre></td></tr></table></figure>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220217105216582.png" alt="image-20220217105216582"></p>
<p>==Request是请求对象，Response是响应对象。==这两个对象在我们使用Servlet的时候有看到：<img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628735216156.png" alt="1628735216156"></p>
<p>此时，我们就需要思考一个问题request和response这两个参数的作用是什么?</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628735746602.png" alt="1628735746602"></p>
<ul>
<li>request:==获取==请求数据<ul>
<li>浏览器会发送HTTP请求到后台服务器[Tomcat]</li>
<li>HTTP的请求中会包含很多请求数据[请求行+请求头+请求体]</li>
<li>后台服务器[Tomcat]会对HTTP请求中的数据进行解析并把解析结果存入到一个对象中</li>
<li>所存入的对象即为request对象，所以我们可以从request对象中获取请求的相关参数</li>
<li>获取到数据后就可以继续后续的业务，比如获取用户名和密码就可以实现登录操作的相关业务</li>
</ul>
</li>
<li>response:==设置==响应数据<ul>
<li>业务处理完后，后台就需要给前端返回业务处理的结果即响应数据</li>
<li>把响应数据封装到response对象中</li>
<li>后台服务器[Tomcat]会解析response对象,按照[响应行+响应头+响应体]格式拼接结果</li>
<li>浏览器最终解析结果，把内容展示在浏览器给用户浏览</li>
</ul>
</li>
</ul>
<p>对于上述所讲的内容，我们通过一个案例来初步体验下request和response对象的使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//使用request对象 获取请求数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;name&quot;</span>);<span class="comment">//url?name=zhangsan</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用response对象 设置响应数据</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;content-type&quot;</span>,<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;&lt;h1&gt;&quot;</span>+name+<span class="string">&quot;,欢迎您！&lt;/h1&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Post...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动成功后就可以通过浏览器来访问，并且根据传入参数的不同就可以在页面上展示不同的内容:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628738273049.png" alt="1628738273049"></p>
<p><strong>小结</strong></p>
<p>在这节中，我们主要认识了下request对象和reponse对象:</p>
<ul>
<li>request对象是用来封装浏览器请求tomcat服务器数据的对象</li>
<li>response对象是用来封装tomcat服务器响应给浏览器的数据的对象</li>
</ul>
<p>目前我们只知道这两个对象是用来干什么的，那么它们具体是如何实现的，就需要我们继续深入的学习。接下来，就先从Request对象来学习,主要学习下面这些内容:</p>
<ul>
<li><p>request继承体系</p>
</li>
<li><p>request获取请求参数</p>
</li>
<li>request请求转发(了解)</li>
</ul>
<h2 id="2-Request对象"><a href="#2-Request对象" class="headerlink" title="2.Request对象"></a>2.Request对象</h2><h3 id="2-1-Request继承体系"><a href="#2-1-Request继承体系" class="headerlink" title="2.1 Request继承体系"></a>2.1 Request继承体系</h3><p>在学习这节内容之前，我们先思考一个问题，前面在介绍Request和Reponse对象的时候，比较细心的同学可能已经发现：</p>
<ul>
<li>当我们的Servlet类实现的是Servlet接口的时候，service方法中的参数是ServletRequest和ServletResponse</li>
<li>当我们的Servlet类继承的是HttpServlet类的时候，doGet和doPost方法中的参数就变成HttpServletRequest和HttpServletReponse</li>
</ul>
<p>那么，</p>
<ul>
<li>ServletRequest和HttpServletRequest的关系是什么?</li>
<li>request对象是有谁来创建的?</li>
<li>request提供了哪些API,这些API从哪里查?</li>
</ul>
<p>首先，我们先来看下Request的继承体系:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628740441008.png" alt="1628740441008"></p>
<p>ServletRequest request = new RequestFacade();</p>
<p>从上图中可以看出，ServletRequest和HttpServletRequest都是Java提供的，所以我们可以打开JavaEE提供的API文档[参考: 资料/JavaEE7-api.chm],打开后可以看到:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628741839475.png" alt="1628741839475"></p>
<p>所以ServletRequest和HttpServletRequest是继承关系，并且两个都是接口，接口是无法创建对象，这个时候就引发了下面这个问题:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628742224589.png" alt="1628742224589"></p>
<p>这个时候，我们就需要用到Request继承体系中的<code>RequestFacade</code>:</p>
<ul>
<li>该类实现了HttpServletRequest接口，也间接实现了ServletRequest接口。</li>
<li>Servlet类中的service方法、doGet方法或者是doPost方法最终都是由Web服务器[Tomcat]来调用的，所以Tomcat提供了方法参数接口的具体实现类，并完成了对象的创建</li>
<li>要想了解RequestFacade中都提供了哪些方法，我们可以直接查看JavaEE的API文档中关于ServletRequest和HttpServletRequest的接口文档，因为RequestFacade实现了其接口就需要重写接口中的方法</li>
</ul>
<p>对于上述结论，要想验证，可以编写一个Servlet，在方法中把request对象打印下，就能看到最终的对象是不是RequestFacade,代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/demo2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(request);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动服务器，运行访问<code>http://localhost:8080/request-demo/demo2</code>,得到运行结果:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628743040046.png" alt="1628743040046"></p>
<p><strong>小结</strong></p>
<ul>
<li>Request的继承体系为ServletRequest(最大父接口)—&gt;HttpServletRequest(可以处理http协议的请求接口)—&gt;RequestFacade(tomcat定义的实现类)</li>
<li>Tomcat需要解析请求数据，封装为request对象,并且创建request对象传递到service方法</li>
<li>使用request对象，可以查阅JavaEE API文档的HttpServletRequest接口中方法说明</li>
</ul>
<h3 id="2-2-Request获取请求数据"><a href="#2-2-Request获取请求数据" class="headerlink" title="2.2 Request获取请求数据"></a>2.2 Request获取请求数据</h3><p>HTTP请求数据总共分为三部分内容，分别是==请求行、请求头、请求体==，对于这三部分内容的数据，分别该如何获取，首先我们先来学习请求行数据如何获取?</p>
<h4 id="2-2-1-获取请求行数据"><a href="#2-2-1-获取请求行数据" class="headerlink" title="2.2.1 获取请求行数据"></a>2.2.1 获取请求行数据</h4><p>请求行包含三块内容，分别是<code>请求方式</code>、<code>请求资源路径</code>、<code>HTTP协议及版本</code></p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628748240075.png" alt="1628748240075"></p>
<p>对于这三部分内容，request对象都提供了对应的API方法来获取，具体如下:</p>
<ul>
<li>获取请求方式: <code>GET</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getMethod()</span><br></pre></td></tr></table></figure>
<ul>
<li>获取虚拟目录(项目访问路径): <code>/request-demo</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getContextPath()</span><br></pre></td></tr></table></figure>
<ul>
<li>获取URL(统一资源定位符): <code>http://localhost:8080/request-demo/req1</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StringBuffer getRequestURL()</span><br></pre></td></tr></table></figure>
<ul>
<li>获取URI(统一资源标识符): <code>/request-demo/req1</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getRequestURI()</span><br></pre></td></tr></table></figure>
<ul>
<li>获取请求参数(GET方式): <code>username=zhangsan&amp;password=123</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getQueryString()</span><br></pre></td></tr></table></figure>
<p>介绍完上述方法后，咱们通过代码把上述方法都使用下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request 获取请求数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// String getMethod()：获取请求方式： GET</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getMethod();</span><br><span class="line">        System.out.println(method);<span class="comment">//GET</span></span><br><span class="line">        <span class="comment">// String getContextPath()：获取虚拟目录(项目访问路径)：/request-demo</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> req.getContextPath();</span><br><span class="line">        System.out.println(contextPath);</span><br><span class="line">        <span class="comment">// StringBuffer getRequestURL(): 获取URL(统一资源定位符)：http://localhost:8080/request-demo/req1</span></span><br><span class="line">        <span class="type">StringBuffer</span> <span class="variable">url</span> <span class="operator">=</span> req.getRequestURL();</span><br><span class="line">        System.out.println(url.toString());</span><br><span class="line">        <span class="comment">// String getRequestURI()：获取URI(统一资源标识符)： /request-demo/req1</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> req.getRequestURI();</span><br><span class="line">        System.out.println(uri);</span><br><span class="line">        <span class="comment">// String getQueryString()：获取请求参数（GET方式）： username=zhangsan</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queryString</span> <span class="operator">=</span> req.getQueryString();</span><br><span class="line">        System.out.println(queryString);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>启动服务器，访问<code>http://localhost:8080/request-demo/req1?username=zhangsan&amp;passwrod=123</code>，获取的结果如下:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628762794935.png" alt="1628762794935"></p>
<h4 id="2-2-2-获取请求头数据"><a href="#2-2-2-获取请求头数据" class="headerlink" title="2.2.2 获取请求头数据"></a>2.2.2 获取请求头数据</h4><p>对于请求头的数据，格式为<code>key: value</code>如下:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628768652535.png" alt="1628768652535"></p>
<p>所以根据请求头名称获取对应值的方法为:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String getHeader(String name) 参数name书写的是请求头冒号左边的内容例如：User-Agent</span><br><span class="line">	User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) 	Chrome/96.0.4664.110 Safari/537.36</span><br></pre></td></tr></table></figure>
<p>接下来，在代码中如果想要获取客户端浏览器的版本信息，则可以使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request 获取请求数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取请求头: user-agent: 浏览器的版本信息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">agent</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;user-agent&quot;</span>);</span><br><span class="line">		System.out.println(agent);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>重新启动服务器后，<code>http://localhost:8080/request-demo/req1?username=zhangsan&amp;passwrod=123</code>，获取的结果如下:</p>
<p><img src="assets/1628769145524.png" alt="1628769145524"></p>
<h4 id="2-2-3-获取请求体数据"><a href="#2-2-3-获取请求体数据" class="headerlink" title="2.2.3 获取请求体数据"></a>2.2.3 获取请求体数据</h4><p><strong>浏览器在发送GET请求的时候是没有请求体的，所以需要把请求方式变更为POST</strong>，请求体中的数据格式如下:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628768665185.png" alt="1628768665185"></p>
<p>对于请求体中的数据，Request对象提供了如下两种方式来获取其中的数据，分别是:</p>
<ul>
<li>获取字节输入流，如果前端发送的是字节数据，比如传递的是文件数据，则使用该方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ServletInputStream getInputStream()</span><br><span class="line">该方法可以获取字节和字符数据</span><br></pre></td></tr></table></figure>
<ul>
<li>获取字符输入流，如果前端发送的是纯文本数据，则使用该方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader getReader()</span><br></pre></td></tr></table></figure>
<p>接下来，大家需要思考，要想获取到请求体的内容该如何实现?</p>
<blockquote>
<p>具体实现的步骤如下:</p>
<p>1.准备一个页面，在页面中添加form表单,用来发送post请求</p>
<p>2.在Servlet的doPost方法中获取请求体数据</p>
<p>3.在doPost方法中使用request的getReader()或者getInputStream()来获取</p>
<p>4.访问测试</p>
</blockquote>
<ol>
<li>在项目的webapp目录下添加一个html页面，名称为：<code>req.html</code></li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">    action:form表单提交的请求地址</span></span><br><span class="line"><span class="comment">    method:请求方式，指定为post</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/request-demo/req1&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ol>
<li>在Servlet的doPost方法中获取数据</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request 获取请求数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//在此处获取请求体中的数据</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>调用getReader()或者getInputStream()方法，因为目前前端传递的是纯文本数据，所以我们采用getReader()方法来获取</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request 获取请求数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">         <span class="comment">//获取post 请求体：请求参数</span></span><br><span class="line">        <span class="comment">//1. 获取字符输入流</span></span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> req.getReader();</span><br><span class="line">        <span class="comment">//2. 读取数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(line);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>==注意==</p>
<p>BufferedReader流是通过request对象来获取的，当请求完成后request对象就会被销毁，request对象被销毁后，BufferedReader流就会自动关闭，所以此处就不需要手动关闭流了。</p>
<ol>
<li>启动服务器，通过浏览器访问<code>http://localhost:8080/request-demo/req.html</code></li>
</ol>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628770516387.png" alt="1628770516387"></p>
<p>点击<code>提交</code>按钮后，就可以在控制台看到前端所发送的请求数据</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628770585480.png" alt="1628770585480"></p>
<p><strong>小结</strong></p>
<p>HTTP请求数据中包含了<code>请求行</code>、<code>请求头</code>和<code>请求体</code>，针对这三部分内容，Request对象都提供了对应的API方法来获取对应的值:</p>
<ul>
<li>请求行<ul>
<li>getMethod()获取请求方式 GET POST</li>
<li>getContextPath()获取项目访问虚拟路径 /day06</li>
<li>getRequestURL()获取请求URL <a target="_blank" rel="noopener" href="http://localhost:8080/day06/demo01">http://localhost:8080/day06/demo01</a></li>
<li>getRequestURI()获取请求URI /day06/demo01</li>
<li>getQueryString()获取GET请求方式的请求参数，获取的请求参数放到一个字符串中 了解</li>
</ul>
</li>
<li>请求头<ul>
<li>getHeader(String name)根据请求头名称获取其对应的值 了解</li>
</ul>
</li>
<li>请求体<ul>
<li>注意: ==浏览器发送的POST请求才有请求体数据==</li>
<li>如果是纯文本数据:getReader()  了解</li>
<li>如果是字节数据如文件数据:getInputStream()</li>
</ul>
</li>
</ul>
<h4 id="2-2-4-获取请求参数的通用方式-很重要"><a href="#2-2-4-获取请求参数的通用方式-很重要" class="headerlink" title="2.2.4 获取请求参数的通用方式(很重要)"></a>2.2.4 获取请求参数的通用方式(很重要)</h4><p>在学习下面内容之前，我们先提出两个问题:</p>
<ul>
<li>什么是请求参数?</li>
<li>请求参数和请求数据的关系是什么?</li>
</ul>
<p>1.什么是请求参数?</p>
<p>为了能更好的回答上述两个问题，我们拿用户登录的例子来说明</p>
<p>1.1 想要登录网址，需要进入登录页面</p>
<p>1.2 在登录页面输入用户名和密码</p>
<p>1.3 将用户名和密码提交到后台</p>
<p>1.4 后台校验用户名和密码是否正确</p>
<p>1.5 如果正确，则正常登录，如果不正确，则提示用户名或密码错误</p>
<p>上述例子中，<strong>用户名和密码其实就是我们所说的请求参数。</strong></p>
<p><strong>get请求：请求参数位于url后面。</strong></p>
<p><strong>post请求：请求参数位于请求体中。</strong></p>
<p>2.什么是请求数据?</p>
<p>请求数据则是包含请求行、请求头和请求体的所有数据</p>
<p>3.请求参数和请求数据的关系是什么?</p>
<p>3.1 请求参数是请求数据中的部分内容</p>
<p>3.2 如果是GET请求，请求参数在请求行中</p>
<p>3.3 如果是POST请求，请求参数一般在请求体中</p>
<p>对于请求参数的获取,常用的有以下两种:</p>
<ul>
<li>GET方式:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getQueryString()</span><br></pre></td></tr></table></figure>
<ul>
<li>POST方式:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BufferedReader getReader();</span><br></pre></td></tr></table></figure>
<p>有了上述的知识储备，我们来实现一个案例需求:</p>
<p>（1）发送一个GET请求并携带用户名，后台接收后打印到控制台</p>
<p>（2）发送一个POST请求并携带用户名，后台接收后打印到控制台</p>
<p>此处大家需要注意的是GET请求和POST请求接收参数的方式不一样，具体实现的代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> req.getQueryString();</span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> req.getReader();</span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> br.readLine();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>==GET请求和POST请求获取请求参数的方式不一样，在获取请求参数这块该如何实现呢?==</p>
<p>要想实现，我们就需要==思考==:</p>
<p>GET请求方式和POST请求方式区别主要在于获取请求参数的方式不一样，是否可以提供一种==统一==获取请求参数的方式，从而==统一==doGet和doPost方法内的代码?</p>
<p>解决方案一:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/req1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//获取请求方式</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> req.getMethod();</span><br><span class="line">        <span class="comment">//获取请求参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">params</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;GET&quot;</span>.equals(method))&#123;</span><br><span class="line">            params = req.getQueryString();</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;POST&quot;</span>.equals(method))&#123;</span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> req.getReader();</span><br><span class="line">            params = reader.readLine();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将请求参数进行打印控制台</span></span><br><span class="line">        System.out.println(params);</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用request的getMethod()来获取请求方式，根据请求方式的不同分别获取请求参数值，这样就可以解决上述问题，但是以后每个Servlet都需要这样写代码，实现起来比较麻烦，这种方案我们不采用</p>
<p>解决方案二:</p>
<p>request对象已经将上述获取请求参数的方法进行了封装，并且request提供的方法实现的功能更强大，以后只需要调用request提供的方法即可，在request的方法中都实现了哪些操作?</p>
<p>(1)根据不同的请求方式获取请求参数，获取的内容如下:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628778931277.png" alt="1628778931277"></p>
<p>(2)把获取到的内容进行分割，内容如下:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628779067793.png" alt="1628779067793"></p>
<p>(3)把分割后端数据，存入到一个Map集合中:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628779368501.png" alt="1628779368501"></p>
<p><strong>注意</strong>:因为参数的值可能是一个，也可能有多个，所以Map的值的类型为String数组。</p>
<p>基于上述理论，request对象为我们提供了如下方法:</p>
<ul>
<li>获取所有参数Map集合</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,String[]&gt; getParameterMap()</span><br></pre></td></tr></table></figure>
<ul>
<li>根据名称获取参数值（数组）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String[] getParameterValues(String name)参数name是前端提交请求参数的等号左边的key(name)==&gt;username=zhangsan===&gt;想获取zhangsan===&gt;getParameterValues(&quot;username&quot;);</span><br></pre></td></tr></table></figure>
<ul>
<li>根据名称获取参数值(单个值)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String getParameter(String name)注意：如果参数的name有多个值谁在前面先获取谁</span><br></pre></td></tr></table></figure>
<p>接下来，我们通过案例来把上述的三个方法进行实例演示:</p>
<p>1.修改req.html页面，添加爱好选项，爱好可以同时选多个</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/request-demo/req2&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span> 游泳</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span> 爬山 <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628780937599.png" alt="1628780937599"></p>
<p>2.在Servlet代码中获取页面传递GET请求的参数值</p>
<p>2.1获取GET方式的所有请求参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request 通用方式获取请求参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//GET请求逻辑</span></span><br><span class="line">        System.out.println(<span class="string">&quot;get....&quot;</span>);</span><br><span class="line">        <span class="comment">//1. 获取所有参数的Map集合</span></span><br><span class="line">        Map&lt;String, String[]&gt; map = req.getParameterMap();</span><br><span class="line">        <span class="keyword">for</span> (String key : map.keySet()) &#123;</span><br><span class="line">            <span class="comment">// username:zhangsan lisi</span></span><br><span class="line">            System.out.print(key+<span class="string">&quot;:&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//获取值</span></span><br><span class="line">            String[] values = map.get(key);</span><br><span class="line">            <span class="keyword">for</span> (String value : values) &#123;</span><br><span class="line">                System.out.print(value + <span class="string">&quot; &quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取的结果为:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628780965283.png" alt="1628780965283"></p>
<p>2.2获取GET请求参数中的爱好，结果是数组值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request 通用方式获取请求参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//GET请求逻辑</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        System.out.println(<span class="string">&quot;------------&quot;</span>);</span><br><span class="line">        String[] hobbies = req.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String hobby : hobbies) &#123;</span><br><span class="line">            System.out.println(hobby);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取的结果为:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628781031437.png" alt="1628781031437"></p>
<p>2.3获取GET请求参数中的用户名和密码，结果是单个值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * request 通用方式获取请求参数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//GET请求逻辑</span></span><br><span class="line">        <span class="comment">//...</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        System.out.println(username);</span><br><span class="line">        System.out.println(password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>获取的结果为:</p>
<p><img src="assets/1628781176434.png" alt="1628781176434"></p>
<p>3.在Servlet代码中获取页面传递POST请求的参数值</p>
<p>3.1将req.html页面form表单的提交方式改成post</p>
<p>3.2将doGet方法中的内容复制到doPost方法中即可</p>
<p><strong>小结</strong></p>
<ul>
<li>req.getParameter()和getParameterMap()方法使用的频率会比较高</li>
</ul>
<h3 id="2-3-解决post请求乱码问题-掌握"><a href="#2-3-解决post请求乱码问题-掌握" class="headerlink" title="2.3 解决post请求乱码问题 掌握"></a>2.3 解决post请求乱码问题 掌握</h3><h4 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h4><ul>
<li>能够掌握产生乱码的原因以及如何解决post乱码</li>
</ul>
<h4 id="内容讲解"><a href="#内容讲解" class="headerlink" title="内容讲解"></a>内容讲解</h4><p>html页面：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/httpServletRequestDemo04Servlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span>   </span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>【1】从tomcat8开始以后，对于get请求乱码，tomcat已经解决。对于post请求中文乱码没有解决，需要我们自己处理。</p>
<p>【2】post请求乱码产生的原因和解决思路</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20210203155118024.png" alt="image-20210203155118024"></p>
<p>说明：</p>
<blockquote>
<p>1)页面使用的编码表是UTF-8编码，tomcat使用的是默认编码表ISO-8859-1进行解码，编码和解码使用的编码表不一致导致乱码。</p>
<p>2)解决思路：先按照ISO-8859-1编码，在按照UTF-8进行重新解码</p>
</blockquote>
<p>【3】解决方案</p>
<p>解决方案有三种：</p>
<blockquote>
<p>1.方案一</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">【<span class="number">1</span>】方式一</span><br><span class="line">          使用URLEncoder类进行编码:<span class="keyword">static</span> String <span class="title function_">encode</span><span class="params">(String s, String enc)</span></span><br><span class="line">                          参数：</span><br><span class="line">                              s:编码的字符串</span><br><span class="line">                              enc:使用编码表</span><br><span class="line">          使用URLDecoder进行解码：<span class="keyword">static</span> String <span class="title function_">decode</span><span class="params">(String s, String enc)</span></span><br><span class="line">                          参数：</span><br><span class="line">                              s:解码的字符串</span><br><span class="line">                              enc:使用编码表</span><br></pre></td></tr></table></figure>
<p>2.方案二</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">【<span class="number">2</span>】方式二：</span><br><span class="line">          使用String类中的方法进行编码：    <span class="type">byte</span>[] getBytes(String charsetName)</span><br><span class="line">                                            参数表示指定的编码表，返回值表示编码后的字节数组</span><br><span class="line">          使用String类中的构造方法进行解码：String(<span class="type">byte</span>[] bytes, String charsetName)</span><br><span class="line">                                          参数：</span><br><span class="line">                                              bytes：字节数组</span><br><span class="line">                                              charsetName：表示指定的编码表</span><br><span class="line">                                          返回值：解码后的字符串</span><br></pre></td></tr></table></figure>
<p>3.方案三</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">【<span class="number">3</span>】方式三：</span><br><span class="line">          如果是get请求，tomcat8底层已经帮助我们解决完了，我们只需要解决post乱码即可，但是上述</span><br><span class="line">          两种方式对于post请求可以解决乱码，对于get请求本身获取到的已经是正确的数据，处理</span><br><span class="line">          后又乱码了。</span><br><span class="line">          我们的想法是：get请求不用我们自己书写代码处理乱码，只需要我们书写代码处理post乱码。</span><br><span class="line">          我们接下来学习第三种解决方案：</span><br><span class="line">          只解决来自于请求体数据的乱码。而get请求体没有数据，post请求体含有数据，所以我们可以理解为第三种处理方案只				是用来解决post乱码的。使用的api是ServletRequest接口中的：</span><br><span class="line">              <span class="keyword">void</span> <span class="title function_">setCharacterEncoding</span><span class="params">(String env)</span></span><br><span class="line">                  参数：指定的编码表</span><br><span class="line">          注意：该方式的代码必须书写在获取请求数据之前</span><br></pre></td></tr></table></figure>
</blockquote>
<p>【4】代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.service.UserServcie;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.URLDecoder;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/httpServletRequestDemo04Servlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.获取浏览器的请求数据</span></span><br><span class="line"><span class="comment">//        String username = request.getParameter(&quot;username&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            解决post乱码问题有三种方式：</span></span><br><span class="line"><span class="comment">            【1】方式一</span></span><br><span class="line"><span class="comment">                使用URLEncoder类进行编码:static String encode(String s, String enc)</span></span><br><span class="line"><span class="comment">                                参数：</span></span><br><span class="line"><span class="comment">                                    s:编码的字符串</span></span><br><span class="line"><span class="comment">                                    enc:使用编码表</span></span><br><span class="line"><span class="comment">                使用URLDecoder进行解码：static String decode(String s, String enc)</span></span><br><span class="line"><span class="comment">                                参数：</span></span><br><span class="line"><span class="comment">                                    s:解码的字符串</span></span><br><span class="line"><span class="comment">                                    enc:使用编码表</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//1)编码 ： 使用URLEncoder类进行编码:static String encode(String s, String enc)</span></span><br><span class="line"><span class="comment">//        String encodeUsername = URLEncoder.encode(username, &quot;ISO-8859-1&quot;);</span></span><br><span class="line"><span class="comment">//        //2)解码：使用URLDecoder进行解码：static String decode(String s, String enc)</span></span><br><span class="line"><span class="comment">//        username = URLDecoder.decode(encodeUsername, &quot;UTF-8&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">             解决post乱码问题有三种方式：</span></span><br><span class="line"><span class="comment">            【2】方式二：</span></span><br><span class="line"><span class="comment">                使用String类中的方法进行编码：    byte[] getBytes(String charsetName)</span></span><br><span class="line"><span class="comment">                                                  参数表示指定的编码表，返回值表示编码后的字节数组</span></span><br><span class="line"><span class="comment">                使用String类中的构造方法进行解码：String(byte[] bytes, String charsetName)</span></span><br><span class="line"><span class="comment">                                                参数：</span></span><br><span class="line"><span class="comment">                                                    bytes：字节数组</span></span><br><span class="line"><span class="comment">                                                    charsetName：表示指定的编码表</span></span><br><span class="line"><span class="comment">                                                返回值：解码后的字符串</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//1)编码 ： 使用String类中的方法进行编码：    byte[] getBytes(String charsetName)</span></span><br><span class="line"><span class="comment">//        byte[] bytes = username.getBytes(&quot;ISO-8859-1&quot;);</span></span><br><span class="line"><span class="comment">//        //2)解码：使用String类中的构造方法进行解码：String(byte[] bytes, String charsetName)</span></span><br><span class="line"><span class="comment">//        username = new String(bytes, &quot;UTF-8&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//username = new String(username.getBytes(&quot;ISO-8859-1&quot;), &quot;UTF-8&quot;);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            解决post乱码问题有三种方式：</span></span><br><span class="line"><span class="comment">            【3】方式三：</span></span><br><span class="line"><span class="comment">                如果是get请求，tomcat8底层已经帮助我们解决完了，我们只需要解决post乱码即可，但是上述</span></span><br><span class="line"><span class="comment">                两种方式对于post请求可以解决乱码，对于get请求本身获取到的已经是正确的数据，处理</span></span><br><span class="line"><span class="comment">                后又乱码了。</span></span><br><span class="line"><span class="comment">                我们的想法是：get请求不用我们自己书写代码处理乱码，只需要我们书写代码处理post乱码。</span></span><br><span class="line"><span class="comment">                我们接下来学习第三种解决方案：</span></span><br><span class="line"><span class="comment">                只解决来自于请求体数据的乱码。而get请求体没有数据，post请求体含有数据，所以我们可以理解为第三种处理方案只是用来解决</span></span><br><span class="line"><span class="comment">                post乱码的。使用的api是ServletRequest接口中的：</span></span><br><span class="line"><span class="comment">                    void setCharacterEncoding(String env)</span></span><br><span class="line"><span class="comment">                        参数：指定的编码表</span></span><br><span class="line"><span class="comment">                注意：该方式的代码必须书写在获取请求数据之前</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);<span class="comment">//告知tomcat使用UTF-8解码页面请求数据</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//  1.获取浏览器的请求数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;username = &quot;</span> + username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="内容小结"><a href="#内容小结" class="headerlink" title="内容小结"></a>内容小结</h4><p>1.tomcat8以后对于get请求乱码已经处理完毕，我们只需要处理post请求</p>
<p>2.处理post请求乱码有三种方式：</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20210804162443247.png" alt="image-20210804162443247"></p>
<p>方式一：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/*</span></span><br><span class="line"><span class="comment">            解决post请求乱码实现：</span></span><br><span class="line"><span class="comment">            方式一：</span></span><br><span class="line"><span class="comment">                编码：URLEncoder：HTML 格式编码的实用工具类。编码方法：</span></span><br><span class="line"><span class="comment">                    static String encode(String s, String enc)  参数：s 编码的字符串  enc  编码使用的编码表</span></span><br><span class="line"><span class="comment">                解码：URLDecoder ： HTML 格式解码的实用工具类，解码方法：</span></span><br><span class="line"><span class="comment">                    static String decode(String s, String enc)   参数：s 解码的字符串  enc  解码使用的编码表</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">//编码：URLEncoder：HTML 格式编码的实用工具类。编码方法：</span></span><br><span class="line"><span class="comment">//        String encode = URLEncoder.encode(username, &quot;ISO-8859-1&quot;);</span></span><br><span class="line"><span class="comment">//        //解码：URLDecoder ： HTML 格式解码的实用工具类，解码方法：</span></span><br><span class="line"><span class="comment">//        username = URLDecoder.decode(encode, &quot;UTF-8&quot;);</span></span><br></pre></td></tr></table></figure>
<p>方式二：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">            解决post请求乱码实现：</span></span><br><span class="line"><span class="comment">            方式二：</span></span><br><span class="line"><span class="comment">                编码：使用String类的方法进行编码：byte[] getBytes(String charsetName)   参数表示指定的码表</span></span><br><span class="line"><span class="comment">                解码：使用String类的构造方法：String(byte[] bytes, String charsetName) 参数：第一个参数是字节数组 第二个参数表示指定的码表</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">         <span class="comment">// 编码：使用String类的方法进行编码：byte[] getBytes(String charsetName)   参数表示指定的码表</span></span><br><span class="line"><span class="comment">//        byte[] bytes = username.getBytes(&quot;ISO-8859-1&quot;);</span></span><br><span class="line"><span class="comment">//        // 解码：使用String类的构造方法：String(byte[] bytes, String charsetName) 参数：第一个参数是字节数组 第二个参数表示指定的码表</span></span><br><span class="line"><span class="comment">//        username = new String(bytes, &quot;UTF-8&quot;);</span></span><br><span class="line"><span class="comment">//        username = new String(username.getBytes(&quot;ISO-8859-1&quot;), &quot;UTF-8&quot;);</span></span><br></pre></td></tr></table></figure>
<p><strong>方式三：解决post请求乱码使用最多</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">           解决post请求乱码实现：</span></span><br><span class="line"><span class="comment">           方式三：推荐使用</span></span><br><span class="line"><span class="comment">           使用request对象调用方法： void setCharacterEncoding(String env) 参数：env指定的编码表</span></span><br><span class="line"><span class="comment">                                   说明：</span></span><br><span class="line"><span class="comment">                                       1.该方法是用来解决请求体数据的乱码问题。get请求体没有数据，post请求体含有数据。可以认为该方法就是解决post请求乱码的</span></span><br><span class="line"><span class="comment">                                       2.该方法必须放到获取所有请求数据之前处理乱码。</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="comment">//处理请求乱码</span></span><br><span class="line">       request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="2-4-Request请求转发-前后端分离后使用较少，面试考"><a href="#2-4-Request请求转发-前后端分离后使用较少，面试考" class="headerlink" title="2.4 Request请求转发(前后端分离后使用较少，面试考)"></a>2.4 Request请求转发(前后端分离后使用较少，面试考)</h3><ol>
<li>==请求转发(forward):一种在服<strong>务器内部</strong>的资源<strong>跳转</strong>方式。==</li>
</ol>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628851404283.png" alt="1628851404283"></p>
<p>(1)浏览器发送请求给服务器，服务器中对应的资源A接收到请求</p>
<p>(2)资源A处理完请求后将请求发给资源B</p>
<p>(3)资源B处理完后将结果响应给浏览器</p>
<p>(4)请求从资源A到资源B的过程就叫==请求转发==</p>
<ol>
<li>请求转发的实现方式:</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">req.getRequestDispatcher(<span class="string">&quot;资源B路径&quot;</span>).forward(req,resp);</span><br><span class="line">说明：</span><br><span class="line">	<span class="number">1</span>）获取这转发器：<span class="type">RequestDispatcher</span> <span class="variable">dispatcher</span> <span class="operator">=</span> req.getRequestDispatcher(<span class="string">&quot;资源B路径&quot;</span>);</span><br><span class="line">	<span class="number">2</span>）转发：RequestDispatcher表示转发器，该接口中有一个方法：forward(request,response)</span><br></pre></td></tr></table></figure>
<p>具体如何来使用，我们先来看下需求:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628854783523.png" alt="1628854783523"></p>
<p>针对上述需求，具体的实现步骤为:</p>
<blockquote>
<p>1.创建一个RequestDemo5类，接收/req5的请求，在doGet方法中打印<code>demo5</code></p>
<p>2.创建一个RequestDemo6类，接收/req6的请求，在doGet方法中打印<code>demo6</code></p>
<p>3.在RequestDemo5的方法中使用</p>
<p>​    req.getRequestDispatcher(“/req6”).forward(req,resp)进行请求转发</p>
<p>4.启动测试</p>
</blockquote>
<p>(1)创建RequestDemo5类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请求转发</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo5...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(2)创建RequestDemo6类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请求转发</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req6&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo6</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo6...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(3)在RequestDemo5的doGet方法中进行请求转发</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请求转发</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo5...&quot;</span>);</span><br><span class="line">        <span class="comment">//请求转发</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/req6&quot;</span>).forward(request,response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(4)启动测试</p>
<p>访问<code>http://localhost:8080/request-demo/req5</code>,就可以在控制台看到如下内容:</p>
<p><img src="assets/1628855192876.png" alt="1628855192876"></p>
<p>说明请求已经转发到了<code>/req6</code></p>
<ol>
<li>请求转发资源间共享数据:使用Request域对象</li>
</ol>
<p>此处主要解决的问题是把请求从<code>/req5</code>转发到<code>/req6</code>的时候，如何传递数据给<code>/req6</code>。</p>
<p>需要使用request对象提供的三个方法:</p>
<ul>
<li>存储数据到request域[范围,数据是存储在request对象]中</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void setAttribute(String name,Object o);</span><br></pre></td></tr></table></figure>
<ul>
<li>根据key获取值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object getAttribute(String name);</span><br></pre></td></tr></table></figure>
<ul>
<li>根据key删除该键值对</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void removeAttribute(String name);</span><br></pre></td></tr></table></figure>
<p>接着上个需求来:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628856995417.png" alt="1628856995417"></p>
<blockquote>
<p>1.在RequestDemo5的doGet方法中转发请求之前，将数据存入request域对象中</p>
<p>2.在RequestDemo6的doGet方法从request域对象中获取数据，并将数据打印到控制台</p>
<p>3.启动访问测试</p>
</blockquote>
<p>(1)修改RequestDemo5中的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/req5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo5</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo5...&quot;</span>);</span><br><span class="line">        <span class="comment">//存储数据</span></span><br><span class="line">        request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="comment">//请求转发</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/req6&quot;</span>).forward(request,response);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(2)修改RequestDemo6中的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 请求转发</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/req6&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo6</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;demo6...&quot;</span>);</span><br><span class="line">        <span class="comment">//获取数据</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">msg</span> <span class="operator">=</span> request.getAttribute(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line">        System.out.println(msg);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(3)启动测试</p>
<p>访问<code>http://localhost:8080/request-demo/req5</code>,就可以在控制台看到如下内容:</p>
<p><img src="assets/1628857213364.png" alt="1628857213364"></p>
<p>此时就可以实现在转发多个资源之间共享数据。</p>
<ol>
<li>请求转发的特点</li>
</ol>
<ul>
<li><p>浏览器地址栏路径不发生变化</p>
<p>虽然后台从<code>/req5</code>转发到<code>/req6</code>,但是浏览器的地址一直是<code>/req5</code>,未发生变化</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628857365153.png" alt="1628857365153"></p>
</li>
<li><p>只能转发到当前服务器的内部资源</p>
<p>不能从一个服务器通过转发访问另一台服务器</p>
</li>
<li><p>一次请求，可以在转发资源间使用request共享数据</p>
<p>虽然后台从<code>/req5</code>转发到<code>/req6</code>，但是这个==只有一次请求==</p>
</li>
<li><p>问题：request.getParameter()</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">request.getParameter(String name)和request.getAttribute(String name);区别</span><br><span class="line"><span class="number">1.</span>request.getParameter(String name):获取来自于浏览器的数据 &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;锁哥&quot;</span>/&gt;</span><br><span class="line">request.getParameter(<span class="string">&quot;username&quot;</span>); 获取的是锁哥</span><br><span class="line"> </span><br><span class="line"><span class="number">2.</span>request.getAttribute(String name)获取的是服务器中的代码：request.setAttibute(String name,Object obj);的数据</span><br><span class="line"></span><br><span class="line">request.setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;黑马程序员&quot;</span>); </span><br><span class="line"><span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> (String) request.getAttribute(<span class="string">&quot;msg&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="2-5request的生命周期"><a href="#2-5request的生命周期" class="headerlink" title="2.5request的生命周期"></a>2.5request的生命周期</h3><p>1.何时创建?</p>
<p>浏览器第一次访问tomcat服务器的时候</p>
<p>2.谁创建?</p>
<p>tomcat创建</p>
<p>3.创建对象做什么？</p>
<p>浏览器第一次访问tomcat服务器的时候，tomcat创建request对象和response对象，传递给servlet中的service方法，然后我们可以在servlet中使用request对象调用方法获取请求数据(请求行 头 体)，然后处理业务逻辑，处理完毕，然后tomcat将响应数据给浏览器，浏览器接收到响应之后，tomcat立刻销毁request和response对象。</p>
<h2 id="3-HTTP响应详解-理解"><a href="#3-HTTP响应详解-理解" class="headerlink" title="3.HTTP响应详解(理解)"></a>3.HTTP响应详解(理解)</h2><h3 id="1-使用抓包查看响应报文协议内容"><a href="#1-使用抓包查看响应报文协议内容" class="headerlink" title="1.使用抓包查看响应报文协议内容"></a>1.使用抓包查看响应报文协议内容</h3><h4 id="学习目标-1"><a href="#学习目标-1" class="headerlink" title="学习目标"></a>学习目标</h4><ul>
<li>能够使用抓包查看响应报文协议内容</li>
</ul>
<h4 id="内容讲解-1"><a href="#内容讲解-1" class="headerlink" title="内容讲解"></a>内容讲解</h4><p>注意：</p>
<p>http响应报文协议包括：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>响应行</span><br><span class="line"><span class="number">2.</span>响应头</span><br><span class="line"><span class="number">3.</span>响应体</span><br></pre></td></tr></table></figure>
<p>响应数据：是服务器响应给浏览器</p>
<p>【1】步骤</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.创建html页面</span><br><span class="line">2.创建servlet</span><br></pre></td></tr></table></figure>
<p>【2】实现</p>
<p>1.创建html页面</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Insert title here<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>get请求<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/getServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;suoge&quot;</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1234&quot;</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;get提交&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>post请求<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/postServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;suoge&quot;</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1234&quot;</span> /&gt;</span> <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;post提交&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>2.创建servlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.a_http_01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/getServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//响应给浏览器数据</span></span><br><span class="line">        response.getWriter().print(<span class="string">&quot;get....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.a_http_01;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/postServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PostServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//响应给浏览器数据</span></span><br><span class="line">        response.getWriter().print(<span class="string">&quot;post....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>【3】抓包结果</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20210204110056794.png" alt="image-20210204110056794"></p>
<h4 id="内容小结-1"><a href="#内容小结-1" class="headerlink" title="内容小结"></a>内容小结</h4><p>​    1.由于浏览器的原因，浏览器会把请求行和响应行信息放在了一起；</p>
<p>​    2.get和post请求的响应没有区别；</p>
<h3 id="2-HTTP响应报文协议介绍"><a href="#2-HTTP响应报文协议介绍" class="headerlink" title="2.HTTP响应报文协议介绍"></a>2.HTTP响应报文协议介绍</h3><h4 id="学习目标-2"><a href="#学习目标-2" class="headerlink" title="学习目标"></a>学习目标</h4><ul>
<li>理解响应报文协议的组成部分</li>
</ul>
<h4 id="内容讲解-2"><a href="#内容讲解-2" class="headerlink" title="内容讲解"></a>内容讲解</h4><p>【1】响应行</p>
<p>响应行格式：协议/版本  状态码</p>
<blockquote>
<p> 如：HTTP/1.1 200 ;</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th>状态码</th>
<th>状态码描述</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>200</strong></td>
<td>OK</td>
<td>请求已成功，请求所希望的响应头或数据体将随此响应返回。出现此状态码是表示正常状态。</td>
</tr>
<tr>
<td><strong>302</strong></td>
<td>Move temporarily</td>
<td>重定向，请求的资源临时从不同的 地址响应请求。</td>
</tr>
<tr>
<td><strong>304</strong></td>
<td>Not Modified</td>
<td>从<strong>浏览器</strong>缓存中读取数据，不从服务器重新获取数据。例如，用户第一次从浏览器访问服务器端图片资源，以后在访问该图片资源的时候就不会再从服务器上加载而直接到浏览器缓存中加载，这样效率更高。</td>
</tr>
<tr>
<td><strong>404</strong></td>
<td>Not Found</td>
<td>请求资源不存在。通常是用户路径编写错误，也可能是服务器资源已删除。</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>服务器已经理解请求，但是拒绝执行它</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
<td>请求行中指定的请求方法不能被用于请求相应的资源</td>
</tr>
<tr>
<td><strong>500</strong></td>
<td>Internal Server Error</td>
<td>服务器内部错误。通常程序抛异常</td>
</tr>
</tbody>
</table>
</div>
<p>【2】响应头</p>
<p>响应头也是用的键值对key:value，服务器基于<strong>响应头</strong>通知浏览器的行为。</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1529932079690-1612408129075.png" alt="1529932079690"></p>
<p><strong>常见的响应头</strong> ：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">响应头Key</th>
<th style="text-align:center">响应头value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">location</td>
<td style="text-align:center">指定响应的路径，需要与状态码302配合使用，完成重定向</td>
</tr>
<tr>
<td style="text-align:center"><strong>content-Type</strong></td>
<td style="text-align:center">响应正文的类型（MIME类型，属于服务器里面的一种类型，例如文件在window系统有自己的类型，.txt  .doc  .jpg。文件在服务器中也有自己的类型），同时还可以解决乱码问题。例如：text/html;charset=UTF-8</td>
</tr>
<tr>
<td style="text-align:center">content-disposition</td>
<td style="text-align:center">通过浏览器以附件形式解析正文，例如：attachment;filename=xx.zip</td>
</tr>
<tr>
<td style="text-align:center">refresh</td>
<td style="text-align:center">页面刷新，例如：3;url=www.itcast.cn    //三秒刷新页面到www.itcast.cn</td>
</tr>
</tbody>
</table>
</div>
<p>常见的MIME类型：就是文件在tomcat服务器中的文件类型：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">				windows    <span class="title function_">tomcat</span><span class="params">(MIME类型)</span></span><br><span class="line">超文本标记语言文本 .html      text/html ***</span><br><span class="line">xml文档 .xml 				text/xml</span><br><span class="line">XHTML文档 .xhtml 			application/xhtml+xml</span><br><span class="line">普通文本         .txt 	   text/plain ***</span><br><span class="line">PDF文档 .pdf 				application/pdf</span><br><span class="line">Microsoft Word文件 .word 	application/msword</span><br><span class="line">PNG图像 .png  			image/png **</span><br><span class="line">GIF图形 .gif 				image/gif</span><br><span class="line">JPEG图形 .jpeg,.jpg 		image/jpeg **</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<p>【3】响应体</p>
<p>​    响应体，就是服务器发送给浏览器的数据。当前浏览器向服务器请求的资源是hello.html，所以服务器给浏览器响应的数据是一个html页面。</p>
<p>请求资源路径：</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/%E8%AF%B7%E6%B1%82html%E9%A1%B5%E9%9D%A2-1612408240761.bmp" alt=""></p>
<p>响应结果：</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/%E5%93%8D%E5%BA%94html%E9%A1%B5%E9%9D%A2-1612408240761.bmp" alt=""></p>
<p>如果请求是servlet,那么浏览器的响应体接收到的是servlet响应的数据：</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/%E5%93%8D%E5%BA%94%E4%BD%93%E5%86%85%E5%AE%B9-1612408240761.bmp" alt=""></p>
<h4 id="内容小结-2"><a href="#内容小结-2" class="headerlink" title="内容小结"></a>内容小结</h4><p>1.响应行：</p>
<p>​    协议版本号 状态码 200(一切正常) 404(找不到资源路径) 500(服务器报异常) 302(和location一起使用，实现重定向) 304(从浏览器缓存中读取数据) 405(服务器的servlet没有重写doGet和doPost方法)</p>
<p>2.响应头：</p>
<p>​    location  指定响应的路径</p>
<p>​    <strong>content-type:告诉浏览器文件格式，告诉浏览器不要解析html文件(text/plain)，解决中文乱码问题</strong></p>
<p>​    refresh 定时刷新</p>
<p>​    content-disposition 以附件形式展示图片等资源</p>
<p>3.响应体：</p>
<p>​    服务器处理的结果响应到浏览器中</p>
<h2 id="4-Response对象"><a href="#4-Response对象" class="headerlink" title="4.Response对象"></a>4.Response对象</h2><h3 id="1-Response对象介绍"><a href="#1-Response对象介绍" class="headerlink" title="1 Response对象介绍"></a>1 Response对象介绍</h3><p>前面讲解完Request对象，接下来我们回到刚开始的那张图:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628857632899.png" alt="1628857632899"></p>
<ul>
<li>Request:使用request对象来==获取==请求数据</li>
<li>Response:使用response对象来==设置==响应数据</li>
</ul>
<p>Reponse的继承体系和Request的继承体系也非常相似:</p>
<p>HttpServletResponse  response = new ResponseFacade();多态</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20211212141323631.png" alt="image-20211212141323631"></p>
<p>介绍完Response的相关体系结构后，接下来对于Response我们需要学习如下内容:</p>
<ul>
<li>Response设置响应数据的功能介绍</li>
<li>Response完成重定向</li>
<li>Response响应字符数据</li>
<li>Response响应字节数据</li>
</ul>
<h3 id="2-Response设置响应数据功能介绍"><a href="#2-Response设置响应数据功能介绍" class="headerlink" title="2 Response设置响应数据功能介绍"></a>2 Response设置响应数据功能介绍</h3><p>HTTP响应数据总共分为三部分内容，分别是==响应行、响应头、响应体==，对于这三部分内容的数据，respone对象都提供了哪些方法来进行设置?</p>
<ol>
<li>响应行</li>
</ol>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628858926498.png" alt="1628858926498"></p>
<p>对于响应行，比较常用的就是设置响应状态码:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void setStatus(int sc);</span><br></pre></td></tr></table></figure>
<ol>
<li>响应头</li>
</ol>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628859051368.png" alt="1628859051368"></p>
<p>设置响应头键值对：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void setHeader(String name,String value);</span><br><span class="line">响应头：name的值</span><br><span class="line">	location  指定响应的路径 </span><br><span class="line">	content-type:告诉浏览器文件格式，告诉浏览器不要解析html文件(text/plain)，解决中文乱码问题 ************</span><br><span class="line">	refresh 定时刷新</span><br><span class="line">	content-disposition 以附件形式展示图片等资源</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol>
<li>响应体</li>
</ol>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628859268095.png" alt="1628859268095"></p>
<p>对于响应体，是通过字符、字节输出流的方式往浏览器写，</p>
<p>获取字符输出流:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PrintWriter getWriter();</span><br></pre></td></tr></table></figure>
<p>获取字节输出流</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ServletOutputStream getOutputStream();</span><br></pre></td></tr></table></figure>
<p>介绍完这些方法后，后面我们会通过案例把这些方法都用一用，首先先来完成下重定向的功能开发。</p>
<h3 id="3-Respones请求重定向"><a href="#3-Respones请求重定向" class="headerlink" title="3 Respones请求重定向"></a>3 Respones请求重定向</h3><ol>
<li>==Response重定向(redirect):一种资源跳转方式(服务器外部的)。==</li>
</ol>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628859860279.png" alt="1628859860279"></p>
<p>(1)浏览器发送请求给服务器，服务器中对应的资源A接收到请求</p>
<p>(2)资源A现在无法处理该请求，就会给浏览器响应一个302的状态码+location的一个访问资源B的路径</p>
<p>(3)浏览器接收到响应状态码为302就会重新发送请求到location对应的访问地址去访问资源B</p>
<p>(4)资源B接收到请求后进行处理并最终给浏览器响应结果，这整个过程就叫==重定向==</p>
<ol>
<li>重定向的实现方式:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">resp.setStatus(302);设置响应状态码是302</span><br><span class="line">resp.setHeader(&quot;location&quot;,&quot;资源B的访问路径&quot;);</span><br></pre></td></tr></table></figure>
<p>具体如何来使用，我们先来看下需求:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628861030429.png" alt="1628861030429"></p>
<p>针对上述需求，具体的实现步骤为:</p>
<blockquote>
<p>1.创建一个ResponseDemo1类，接收/resp1的请求，在doGet方法中打印<code>resp1....</code></p>
<p>2.创建一个ResponseDemo2类，接收/resp2的请求，在doGet方法中打印<code>resp2....</code></p>
<p>3.在ResponseDemo1的方法中使用</p>
<p>​    response.setStatus(302);</p>
<p>​    response.setHeader(“Location”,”/request-demo/resp2”) 来给前端响应结果数据</p>
<p>4.启动测试</p>
</blockquote>
<p>(1)创建ResponseDemo1类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp1....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(2)创建ResponseDemo2类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp2....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(3)在ResponseDemo1的doGet方法中给前端响应数据</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp1....&quot;</span>);</span><br><span class="line">        <span class="comment">//重定向</span></span><br><span class="line">        <span class="comment">//1.设置响应状态码 302</span></span><br><span class="line">        response.setStatus(<span class="number">302</span>);</span><br><span class="line">        <span class="comment">//2. 设置响应头 Location</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Location&quot;</span>,<span class="string">&quot;/request-demo/resp2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>(4)启动测试</p>
<p>访问<code>http://localhost:8080/request-demo/resp1</code>,就可以在控制台看到如下内容:</p>
<p><img src="assets/1628861404699.png" alt="1628861404699"></p>
<p>说明<code>/resp1</code>和<code>/resp2</code>都被访问到了。到这重定向就已经完成了。</p>
<p>虽然功能已经实现，但是从设置重定向的两行代码来看，会发现除了重定向的地址不一样，其他的内容都是一模一样，所以resposne对象给我们提供了简化的编写方式为:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resposne.sendRedirect(&quot;/request-demo/resp2&quot;)</span><br></pre></td></tr></table></figure>
<p>所以第3步中的代码就可以简化为：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/resp1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo1</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;resp1....&quot;</span>);</span><br><span class="line">        <span class="comment">//重定向</span></span><br><span class="line">        resposne.sendRedirect(<span class="string">&quot;/request-demo/resp2&quot;</span>)；</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>重定向的特点</li>
</ol>
<ul>
<li><p>浏览器地址栏路径发送变化</p>
<p>当进行重定向访问的时候，由于是由浏览器发送的两次请求，所以地址会发生变化</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628861893130.png" alt="1628861893130"></p>
</li>
<li><p>可以重定向到任何位置的资源(服务内容、外部均可)</p>
<p>因为第一次响应结果中包含了浏览器下次要跳转的路径，所以这个路径是可以任意位置资源。</p>
</li>
<li><p>两次请求，不能在多个资源使用request共享数据</p>
<p>因为浏览器发送了两次请求，是两个不同的request对象，就无法通过request对象进行共享数据</p>
</li>
</ul>
<p>介绍完==请求重定向==和==请求转发==以后，接下来需要把这两个放在一块对比下:</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628862170296.png" alt="1628862170296"></p>
<p>以后到底用哪个，还是需要根据具体的业务来决定。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 如果需要在资源之间传递共享request数据,使用请求转发, 否则就用重定向</span></span><br></pre></td></tr></table></figure>
<h3 id="4-路径问题"><a href="#4-路径问题" class="headerlink" title="4 路径问题"></a>4 路径问题</h3><ol>
<li>问题1：转发的时候路径上没有加<code>/request-demo</code>而重定向加了，那么到底什么时候需要加，什么时候不需要加呢?</li>
</ol>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628862652700.png" alt="1628862652700"></p>
<p>其实判断的依据很简单，只需要记住下面的规则即可:</p>
<ul>
<li>浏览器使用:需要加虚拟目录(项目访问路径)</li>
<li>服务端使用:不需要加虚拟目录</li>
</ul>
<p>对于转发来说，因为是在服务端进行的，所以不需要加虚拟目录</p>
<p>对于重定向来说，路径最终是由浏览器来发送请求，就需要添加虚拟目录。</p>
<p>掌握了这个规则，接下来就通过一些练习来强化下知识的学习:</p>
<ul>
<li><code>&lt;a href=&#39;路劲&#39;&gt;</code></li>
<li><code>&lt;form action=&#39;路径&#39;&gt;</code></li>
<li>req.getRequestDispatcher(“路径”)</li>
<li>resp.sendRedirect(“路径”)</li>
</ul>
<p>答案:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.超链接，从浏览器发送，需要加</span><br><span class="line">2.表单，从浏览器发送，需要加</span><br><span class="line">3.重定向，是由浏览器进行跳转，需要加。</span><br><span class="line">4.转发，是从服务器内部跳转，不需要加</span><br></pre></td></tr></table></figure>
<h3 id="5-Response响应字符数据"><a href="#5-Response响应字符数据" class="headerlink" title="5 Response响应字符数据"></a>5 Response响应字符数据</h3><p>要想将字符数据写回到浏览器，我们需要两个步骤:</p>
<ul>
<li><p>通过Response对象获取字符输出流： PrintWriter writer = resp.getWriter(); 由于获取打印字符流是根据response对象获取的，所以向浏览器打印输出</p>
</li>
<li><p>通过字符输出流写数据: writer.write(“aaa”);</p>
</li>
</ul>
<p>接下来，我们实现通过些案例把响应字符数据给实际应用下:</p>
<ol>
<li>返回一个简单的字符串<code>aaa</code></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 响应字符数据：设置字符数据的响应体</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/resp3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//1. 获取字符输出流</span></span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">		 writer.write(<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628863905362.png" alt="1628863905362"></p>
<ol>
<li>返回一串html字符串，并且能被浏览器解析</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">PrintWriter writer = response.getWriter();</span><br><span class="line">//content-type，告诉浏览器返回的数据类型是HTML类型数据，这样浏览器才会解析HTML标签</span><br><span class="line">response.setHeader(&quot;content-type&quot;,&quot;text/html&quot;);</span><br><span class="line">writer.write(&quot;&lt;h1&gt;aaa&lt;/h1&gt;&quot;);</span><br></pre></td></tr></table></figure>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628864140820.png" alt="1628864140820"></p>
<p>==注意:==一次请求响应结束后，response对象就会被销毁掉，所以不要手动关闭流。</p>
<ol>
<li>返回一个中文的字符串<code>你好</code>，需要注意设置响应数据的编码为<code>utf-8</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//设置响应的数据格式及数据的编码</span><br><span class="line">response.setContentType(&quot;text/html;charset=utf-8&quot;);</span><br><span class="line">writer.write(&quot;你好&quot;);</span><br></pre></td></tr></table></figure>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628864390263.png" alt="1628864390263"></p>
<h3 id="6-Response响应字节数据"><a href="#6-Response响应字节数据" class="headerlink" title="6 Response响应字节数据"></a>6 Response响应字节数据</h3><p>要想将字节数据写回到浏览器，我们需要两个步骤:</p>
<ul>
<li><p>通过Response对象获取字节输出流：ServletOutputStream outputStream = resp.getOutputStream();</p>
</li>
<li><p>通过字节输出流写数据: outputStream.write(字节数据);</p>
</li>
</ul>
<p>接下来，我们实现通过些案例把响应字节数据给实际应用下:</p>
<ol>
<li>返回一个图片文件到浏览器</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 响应字节数据：设置字节数据的响应体</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/resp4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. 读取文件</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;D:\\abc\\柳岩.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//2. 获取response字节输出流</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        <span class="comment">//3. 完成流的copy</span></span><br><span class="line">        <span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> ((len = fis.read(buff))!= -<span class="number">1</span>)&#123;</span><br><span class="line">            os.write(buff,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1628864883564.png" alt="1628864883564"></p>
<p>上述代码中，对于流的copy的代码还是比较复杂的，所以我们可以使用别人提供好的方法来简化代码的开发，具体的步骤是:</p>
<p>(1)pom.xml添加依赖</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>(2)调用工具类方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//fis:输入流</span><br><span class="line">//os:输出流</span><br><span class="line">IOUtils.copy(fis,os);</span><br></pre></td></tr></table></figure>
<p>优化后的代码:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 响应字节数据：设置字节数据的响应体</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@WebServlet(&quot;/resp4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResponseDemo4</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1. 读取文件</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;d://a.jpg&quot;</span>);</span><br><span class="line">        <span class="comment">//2. 获取response字节输出流</span></span><br><span class="line">        <span class="type">ServletOutputStream</span> <span class="variable">os</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line">        <span class="comment">//3. 完成流的copy</span></span><br><span class="line">      	IOUtils.copy(fis,os);</span><br><span class="line">        fis.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="built_in">this</span>.doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-用户注册登录案例"><a href="#5-用户注册登录案例" class="headerlink" title="5.用户注册登录案例"></a>5.用户注册登录案例</h2><p>接下来我们通过两个比较常见的案例，一个是==注册==，一个是==登录==来对今天学习的内容进行一个实战演练，首先来实现用户登录。</p>
<h3 id="5-0案例说明"><a href="#5-0案例说明" class="headerlink" title="5.0案例说明"></a>5.0案例说明</h3><p>【1】案例使用的技术</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 1.前端</span></span><br><span class="line"><span class="code">	1）vue-cli</span></span><br><span class="line"><span class="code">	2）elementui</span></span><br><span class="line"><span class="code">	3）axios 异步请求</span></span><br><span class="line"><span class="code"># 2.后端</span></span><br><span class="line"><span class="code">	1）mysql</span></span><br><span class="line"><span class="code">	2）servlet</span></span><br><span class="line"><span class="code">	3）mybatis</span></span><br><span class="line"><span class="code">	4）maven</span></span><br><span class="line"><span class="code"># 3.前后端分离技术</span></span><br><span class="line"><span class="code">	前端部署到vscode的服务器中</span></span><br><span class="line"><span class="code">	后端部署到tomcat中 </span></span><br></pre></td></tr></table></figure>
<p>【2】案例前准备工作</p>
<ul>
<li>找到授课素材中的<code>登录注册案例sql.sql</code>脚本并执行</li>
</ul>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220217185454434.png" alt="image-20220217185454434"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> database day06_db;</span><br><span class="line">use day06_db;</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `<span class="keyword">user</span>`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>` (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `username` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `password` <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB AUTO_INCREMENT<span class="operator">=</span><span class="number">5</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of user</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;1234&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;lisi&#x27;</span>, <span class="string">&#x27;1234&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;wangwu&#x27;</span>, <span class="string">&#x27;1234&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>` <span class="keyword">VALUES</span> (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;zhaoliu&#x27;</span>, <span class="string">&#x27;1234&#x27;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>将素材中的后端项目复制到你的idea工作空间中并导入idea中</li>
</ul>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220217185659252.png" alt="image-20220217185659252"></p>
<p><img src="assets\image-20220217185821161.png" alt="image-20220217185821161"></p>
<p><img src="assets\image-20220217185943213.png" alt="image-20220217185943213"></p>
<font color="red" size="5px">注意：别忘记修改maven仓库地址变为你的maven仓库地址</font>

<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220217190101833.png" alt="image-20220217190101833"></p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220217190134430.png" alt="image-20220217190134430"></p>
<ul>
<li>将素材中的前端项目复制到你的vscode工作空间中并导入vscode中</li>
</ul>
<p><img src="assets\image-20220217190306276.png" alt="image-20220217190306276"></p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220217190535334.png" alt="image-20220217190535334"></p>
<ul>
<li>在vscode中切换到day06_usermanager_UI位置，打开终端并执行命令：cnpm i 安装前端依赖</li>
</ul>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220217190722585.png" alt="image-20220217190722585"></p>
<p><img src="assets\image-20220217190747016.png" alt="image-20220217190747016"></p>
<ul>
<li>在终端输入命令：npm run dev 启动前端服务器</li>
<li>登录组件login.vue代码：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">         <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">:model</span>=<span class="string">&quot;ruleForm&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">ref</span>=<span class="string">&quot;ruleForm&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">       </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">class</span>=<span class="string">&quot;demo-ruleForm&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="comment">&lt;!-- </span></span></span><br><span class="line"><span class="comment"><span class="language-xml">                v-model=&quot;ruleForm.username&quot; :双向数据绑定，如果视图改变，那么下面的脚本ruleForm.username的值也会改变</span></span></span><br><span class="line"><span class="comment"><span class="language-xml"></span></span></span><br><span class="line"><span class="comment"><span class="language-xml">               --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">required</span>=<span class="string">&quot;required&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.username&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-user-solid&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">type</span>=<span class="string">&quot;password&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.password&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="comment">&lt;!-- </span></span></span><br><span class="line"><span class="comment"><span class="language-xml">                给当前按钮标签绑定一个单击事件，单击当前按钮时就会调用submitForm函数，然后将表单传递到该函数中</span></span></span><br><span class="line"><span class="comment"><span class="language-xml">               --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submitForm(&#x27;ruleForm&#x27;)&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">   </span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 是登录表单的数据，只要在视图上输入数据之后这里就会存在数据了</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">ruleForm</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">rules</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">username</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入用户名&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">password</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">//点击登录按钮执行该函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">submitForm</span>(<span class="params">formName</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">$refs</span>[formName].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="comment">//valid的值是true,表示登录表单校验通过，可以提交表单，如果值是false，表示校验未通过，不能提交表单</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">if</span> (valid) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//<span class="doctag">TODO:</span>向后台发送异步请求，携带请求数据完成登录</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//表单校验失败</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">// console.log(&#x27;error submit!!&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;校验失败，不能提交表单哦，欧耶&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">resetForm</span>(<span class="params">formName</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">$refs</span>[formName].<span class="title function_">resetFields</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>注册组件register.vue</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;ruleForm&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;ruleForm&quot;</span> <span class="attr">class</span>=<span class="string">&quot;demo-ruleForm&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名&quot;</span> <span class="attr">required</span>=<span class="string">&quot;required&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.username&quot;</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-user-solid&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;ruleForm.password&quot;</span> <span class="attr">prefix-icon</span>=<span class="string">&quot;el-icon-lock&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">type</span>=<span class="string">&quot;flex&quot;</span> <span class="attr">justify</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;5&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">class</span>=<span class="string">&quot;btn-form&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submitForm(&#x27;ruleForm&#x27;)&quot;</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="comment">&lt;!-- &lt;el-button @click=&quot;resetForm(&#x27;ruleForm&#x27;)&quot;&gt;重置&lt;/el-button&gt; --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">ruleForm</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">username</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">rules</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">username</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入用户名&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">password</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#123; <span class="attr">required</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&#x27;请输入密码&#x27;</span>, <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          ]</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">submitForm</span>(<span class="params">formName</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">$refs</span>[formName].<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">if</span> (valid) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//<span class="doctag">TODO:</span>向后台发送异步请求，携带请求数据完成注册</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125; <span class="keyword">else</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">             <span class="comment">//表单校验失败</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//console.log(&#x27;error submit!!&#x27;);</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;校验失败，不能提交表单哦，欧耶&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">resetForm</span>(<span class="params">formName</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">$refs</span>[formName].<span class="title function_">resetFields</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">    </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<ul>
<li>config/index.js</li>
</ul>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220503093701626.png" alt="image-20220503093701626"></p>
<h3 id="5-1-用户登录"><a href="#5-1-用户登录" class="headerlink" title="5.1 用户登录"></a>5.1 用户登录</h3><h4 id="1-登录案例分析"><a href="#1-登录案例分析" class="headerlink" title="1.登录案例分析"></a>1.登录案例分析</h4><h5 id="学习目标-3"><a href="#学习目标-3" class="headerlink" title="学习目标"></a>学习目标</h5><ul>
<li>能够分析登录案例的步骤</li>
<li>能够理解登录案例整体流程</li>
</ul>
<h5 id="内容讲解-3"><a href="#内容讲解-3" class="headerlink" title="内容讲解"></a>内容讲解</h5><h6 id="1-开发步骤"><a href="#1-开发步骤" class="headerlink" title="1.开发步骤"></a>1.开发步骤</h6><p>1.画流程开发图</p>
<p>2.搭建项目环境</p>
<p>3.根据流程图编写代码</p>
<p>4.浏览器访问服务器，测试功能</p>
<h6 id="2-画流程开发图"><a href="#2-画流程开发图" class="headerlink" title="2.画流程开发图"></a>2.画流程开发图</h6><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">#web层：</span></span><br><span class="line"><span class="code">    1.处理post请求乱码</span></span><br><span class="line"><span class="code">    2.获取请求参数</span></span><br><span class="line"><span class="code">    3.将请求参数封装到User实体类对象中</span></span><br><span class="line"><span class="code">    4.创建service业务层对象</span></span><br><span class="line"><span class="code">    5.使用业务层对象调用业务层登录方法将User实体类对象传递给业务层</span></span><br><span class="line"><span class="code">    User u = service.login(user);</span></span><br><span class="line"><span class="code">    6.判断u是否等于null</span></span><br><span class="line"><span class="code">    7.如果等于null，说明没有查询到用户，登录失败，响应给前端false</span></span><br><span class="line"><span class="code">    8.如果不等于null，说明查询到用户了，登录成功，响应给前端true</span></span><br><span class="line"><span class="code">    </span></span><br><span class="line"><span class="code"># service层：   </span></span><br><span class="line"><span class="code">    1.定义登录方法接收web层传递的User实体类对象</span></span><br><span class="line"><span class="code">    2.在登录方法体中获取操作mybatis的会话对象</span></span><br><span class="line"><span class="code">    3.使用会话对象调用方法获取接口代理对象</span></span><br><span class="line"><span class="code">    4.使用接口代理对象调用接口中的登录方法</span></span><br><span class="line"><span class="code">    5.释放资源</span></span><br><span class="line"><span class="code">    6.将查询的User类对象返回给web层</span></span><br><span class="line"><span class="code">#dao层：</span></span><br><span class="line"><span class="code"> 	1.定义接口UserMapper</span></span><br><span class="line"><span class="code"> 	2.在接口UserMapper中定义登录方法</span></span><br><span class="line"><span class="code">    </span></span><br></pre></td></tr></table></figure>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20220218104058553.png" alt="image-20220218104058553"></p>
<h4 id="2-根据流程图编写代码"><a href="#2-根据流程图编写代码" class="headerlink" title="2.根据流程图编写代码"></a>2.根据流程图编写代码</h4><h5 id="1-dao层代码的编写"><a href="#1-dao层代码的编写" class="headerlink" title="1.dao层代码的编写"></a>1.dao层代码的编写</h5><h6 id="学习目标-4"><a href="#学习目标-4" class="headerlink" title="学习目标"></a>学习目标</h6><ul>
<li>能够编写出dao层的代码向数据库查询数据</li>
</ul>
<h6 id="内容讲解-4"><a href="#内容讲解-4" class="headerlink" title="内容讲解"></a>内容讲解</h6><p>【1】步骤</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.创建UserMapper接口</span><br><span class="line">2.在UserMapper接口中定义登录方法</span><br><span class="line">3.在登录方法上使用注解向数据库根据用户名和密码查询数据</span><br></pre></td></tr></table></figure>
<p>【2】实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="comment">// 1.定义接口UserMapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">// 2.在接口UserMapper中定义登录方法</span></span><br><span class="line">    <span class="comment">//登录</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        1.username=#&#123;username&#125; 等号左边的username数据表的字段名  等号右边大括号中的username看此时login登录方法的形参类型</span></span><br><span class="line"><span class="comment">        这里login登录方法形参类型是User类型，如果形参是一个pojo属于复杂类型，看实体类User中的getXxxx()去掉get，X变为x</span></span><br><span class="line"><span class="comment">        例如getUsername----username,#&#123;username&#125;在mybatis底层调用的是User实体类中的getUsername</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where username=#&#123;username&#125; and password=#&#123;password&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">login</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="内容小结-3"><a href="#内容小结-3" class="headerlink" title="内容小结"></a>内容小结</h6><p>1.定义根据用户名和密码查询的方法</p>
<p>2.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">username=#&#123;username&#125;:</span><br><span class="line">            <span class="number">1.</span>等号左边的username看数据表的字段名</span><br><span class="line">            <span class="number">2.</span>#&#123;username&#125;:大括号中的username，由于login方法参数是User实体类类型，所以这里的username书写看User实体类中的成员变量名username</span><br><span class="line">            实际上这里调用的是User实体类中的getUsername</span><br></pre></td></tr></table></figure>
<h5 id="2-service层代码的编写"><a href="#2-service层代码的编写" class="headerlink" title="2.service层代码的编写"></a>2.service层代码的编写</h5><h6 id="学习目标-5"><a href="#学习目标-5" class="headerlink" title="学习目标"></a>学习目标</h6><ul>
<li>能够编写业务层代码</li>
</ul>
<h6 id="内容讲解-5"><a href="#内容讲解-5" class="headerlink" title="内容讲解"></a>内容讲解</h6><p>【1】步骤：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.定义登录方法接收web层传递的用户对象</span><br><span class="line">  2.使用mybatis工具类获取session对象</span><br><span class="line">  3.使用session对象调用方法获取接口Mapper对象</span><br><span class="line">  4.使用Mapper对象调用接口的登录方法</span><br><span class="line">  User u = mapper.login(user);</span><br><span class="line">  5.返回给web层对象u</span><br></pre></td></tr></table></figure>
<p>【2】实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.dao.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.utils.SessionFactoryUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    业务层</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//登录</span></span><br><span class="line">    <span class="comment">// 1.定义登录方法接收web层传递的用户对象</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// 2.使用mybatis工具类获取session对象</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// 3.使用session对象调用方法获取接口Mapper对象</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">// 4.使用Mapper对象调用接口的登录方法</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> mapper.login(user);</span><br><span class="line">        <span class="comment">// 5.释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        <span class="comment">// 6.返回给web层对象u</span></span><br><span class="line">        <span class="keyword">return</span> u;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="内容小结-4"><a href="#内容小结-4" class="headerlink" title="内容小结"></a>内容小结</h6><p>使用mybatis工具类获取接口代理对象，调用方法查询用户并返回查询的实体类对象给web层。</p>
<h5 id="3-web层代码的编写"><a href="#3-web层代码的编写" class="headerlink" title="3.web层代码的编写"></a>3.web层代码的编写</h5><h6 id="学习目标-6"><a href="#学习目标-6" class="headerlink" title="学习目标"></a>学习目标</h6><ul>
<li>能够编写web层代码</li>
</ul>
<h6 id="内容讲解-6"><a href="#内容讲解-6" class="headerlink" title="内容讲解"></a>内容讲解</h6><p>【1】步骤</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.获取浏览器的请求数据</span><br><span class="line">   2.创建实体类对象user</span><br><span class="line">   3.将用户名和密码封装到对象user</span><br><span class="line">   4.创建业务层对象</span><br><span class="line">   5.使用业务层对象调用业务层登录方法</span><br><span class="line">   6.判断业务层返回的对象是否是null</span><br><span class="line">   7.是null，说明没有查到用户，登录失败，返回给前端false</span><br><span class="line">   8.如果不是null,登录成功，返回给前端true</span><br></pre></td></tr></table></figure>
<p>【2】实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.service.UserServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/loginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 1.获取浏览器的请求数据</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//&lt;input id=&quot;username&quot; name=&quot;username&quot; type=&quot;text&quot;&gt;</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);<span class="comment">//参数位置的username必须和login.html页面中input标签的name属性值一致</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);<span class="comment">//参数位置的password必须和login.html页面中input标签的name属性值一致</span></span><br><span class="line">        <span class="comment">// 2.创建实体类对象user</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        <span class="comment">// 3.将用户名和密码封装到对象user</span></span><br><span class="line">        user.setUsername(username);</span><br><span class="line">        user.setPassword(password);</span><br><span class="line">        <span class="comment">// 4.创建业务层对象</span></span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">        <span class="comment">// 5.使用业务层对象调用业务层登录方法</span></span><br><span class="line">        <span class="comment">//u是service层返回的</span></span><br><span class="line">       <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> userService.login(user);</span><br><span class="line">        <span class="comment">// 6.判断业务层返回的对象是否是null</span></span><br><span class="line">        <span class="keyword">if</span>(u==<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">// 7.是null，说明没有查到用户，登录失败，跳转到登录失败页面</span></span><br><span class="line">            response.getWriter().print(<span class="literal">false</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="comment">// 8.如果不是null,登录成功，跳转到成功页面</span></span><br><span class="line">            response.getWriter().print(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="4-前端代码的编写"><a href="#4-前端代码的编写" class="headerlink" title="4.前端代码的编写"></a>4.前端代码的编写</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// axios.post(url,携带参数)</span></span><br><span class="line">         <span class="comment">/*</span></span><br><span class="line"><span class="comment">           1.http://localhost:8080/user/loginServlet&quot;</span></span><br><span class="line"><span class="comment">             1)http://localhost:8080 表示网络三要素 由于是前后端分离，必须书写。在vue脚手架中实现跨域，并且设置后台地址：</span></span><br><span class="line"><span class="comment">                    proxyTable: &#123;</span></span><br><span class="line"><span class="comment">                       &quot;/&quot;: &#123;</span></span><br><span class="line"><span class="comment">                                 target: &quot;http://localhost:8080&quot;,</span></span><br><span class="line"><span class="comment">                                 changeOrigin: true</span></span><br><span class="line"><span class="comment">                             &#125;</span></span><br><span class="line"><span class="comment">                     &#125;,</span></span><br><span class="line"><span class="comment">               这里路径可以不写http://localhost:8080</span></span><br><span class="line"><span class="comment">             2)user/loginServlet : 后台服务器的虚拟路径/资源路径</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">         axios.<span class="title function_">post</span>(<span class="string">&quot;/user/loginServlet&quot;</span>,<span class="string">`username=<span class="subst">$&#123;<span class="variable language_">this</span>.ruleForm.username&#125;</span>&amp;password=<span class="subst">$&#123;<span class="variable language_">this</span>.ruleForm.password&#125;</span>`</span>)</span><br><span class="line">              .<span class="title function_">then</span>(<span class="function"><span class="params">resp</span>=&gt;</span>&#123;</span><br><span class="line">                <span class="comment">//输出数据</span></span><br><span class="line">                <span class="comment">//后端登录成功返回true 跳转主页</span></span><br><span class="line">                <span class="comment">// 登录失败返回false 在登录页面提示用户名或者密码错误</span></span><br><span class="line">               <span class="comment">//  console.log(resp.data);</span></span><br><span class="line">               <span class="keyword">if</span>(resp.<span class="property">data</span>)&#123;</span><br><span class="line">                   <span class="comment">// 后端登录成功返回true 跳转主页</span></span><br><span class="line">                   <span class="comment">//这里是跳转到success.vue组件中了，这里需要加#</span></span><br><span class="line">                   <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&quot;#/success&quot;</span>;</span><br><span class="line">               &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                   <span class="comment">// 登录失败返回false 在登录页面提示用户名或者密码错误</span></span><br><span class="line">                   <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;用户名或者密码错误&#x27;</span>);</span><br><span class="line">               &#125;</span><br><span class="line">              &#125;);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         <span class="comment">//表单校验失败</span></span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;error submit!!&#x27;</span>);</span><br><span class="line">         <span class="comment">//阻止表单的提交</span></span><br><span class="line">         <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-用户注册"><a href="#5-2-用户注册" class="headerlink" title="5.2 用户注册"></a>5.2 用户注册</h3><h4 id="学习目标-7"><a href="#学习目标-7" class="headerlink" title="学习目标"></a>学习目标</h4><ul>
<li>完成注册案例</li>
</ul>
<h4 id="内容讲解-7"><a href="#内容讲解-7" class="headerlink" title="内容讲解"></a>内容讲解</h4><h5 id="1-开发步骤-1"><a href="#1-开发步骤-1" class="headerlink" title="1.开发步骤"></a>1.开发步骤</h5><p>1.画注册流程图</p>
<p>2.根据流程图编写代码</p>
<p>3.浏览器访问服务器，测试功能</p>
<h5 id="2-画注册流程图"><a href="#2-画注册流程图" class="headerlink" title="2.画注册流程图"></a>2.画注册流程图</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">dao层：</span><br><span class="line">     <span class="comment">//1.在接口中定义根据用户名查询的方法</span></span><br><span class="line">     <span class="comment">//2.在接口中定义注册方法</span></span><br><span class="line">service层：</span><br><span class="line">    <span class="comment">//1.定义注册的方法接收web层传递的user对象</span></span><br><span class="line">    <span class="comment">//2.获取会话对象</span></span><br><span class="line">    <span class="comment">//3.获取接口代理对象</span></span><br><span class="line">    <span class="comment">//4.使用接口代理对象调用接口中的根据用户名查询的方法</span></span><br><span class="line">    <span class="comment">//5.判断返回的User对象是否等于null</span></span><br><span class="line">    <span class="comment">//6.如果等于null,说明没有查到，可以注册，使用接口代理对象调用注册方法</span></span><br><span class="line">    <span class="comment">//7.提交事务</span></span><br><span class="line">    <span class="comment">//8.返回给web层true</span></span><br><span class="line">    <span class="comment">//9.如果查询的用户对象不等于null,说明用户存在，不能注册，返回给web层false</span></span><br><span class="line">    <span class="comment">//10.释放资源</span></span><br><span class="line">web层：</span><br><span class="line">    	<span class="comment">//1.处理请求乱码</span></span><br><span class="line">        <span class="comment">//2.获取页面的数据</span></span><br><span class="line">        <span class="comment">//3.创建User对象</span></span><br><span class="line">        <span class="comment">//4.将获取的数据封装到User对象中</span></span><br><span class="line">        <span class="comment">//5.创建业务层对象</span></span><br><span class="line">        <span class="comment">//6.使用业务层对象调用注册方法，将User对象作为参数传递到业务层</span></span><br><span class="line">        <span class="comment">//7.将返回值返回给前端服务器</span></span><br></pre></td></tr></table></figure>
<p>注意：注册案例需要先根据注册的用户名查询数据，如果用户名存在注册失败，用户名不存在，注册成功。</p>
<p><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/image-20201119165058398.png" alt="image-20201119165058398"></p>
<h5 id="3-根据流程图编写代码"><a href="#3-根据流程图编写代码" class="headerlink" title="3.根据流程图编写代码"></a>3.根据流程图编写代码</h5><h6 id="3-1dao层"><a href="#3-1dao层" class="headerlink" title="3.1dao层"></a>3.1dao层</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="comment">//1.创建接口UserMapper</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">//1.定义根据用户名查询用户的方法</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where username=#&#123;username&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">queryUserByUserName</span><span class="params">(<span class="meta">@Param(&quot;username&quot;)</span> String username)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.添加用户的方法</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user values(null,#&#123;username&#125;,#&#123;password&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">register</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="3-2service层"><a href="#3-2service层" class="headerlink" title="3.2service层"></a>3.2service层</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.dao.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.util.SqlSessionUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> &#123;</span><br><span class="line">    <span class="comment">//登录</span></span><br><span class="line">    <span class="comment">// 1.定义登录方法接收web层传递的用户对象</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">login</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="comment">// 2.使用mybatis工具类获取session对象</span></span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtil.getSqlSession(<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">// 3.使用session对象调用方法获取接口Mapper对象</span></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="comment">// 4.使用Mapper对象调用接口的登录方法</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> mapper.login(user);</span><br><span class="line">        <span class="comment">// 5.释放资源</span></span><br><span class="line">        sqlSession.close();</span><br><span class="line">        <span class="comment">// 6.返回给web层对象u</span></span><br><span class="line">        <span class="keyword">return</span> u;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//思想：先根据用户名查询是否存在，如果不存在在注册，存在不注册</span></span><br><span class="line">    <span class="comment">//1.定义注册的方法接收web层传递的user对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">register</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 2.使用mybatis工具类获取session对象</span></span><br><span class="line">            sqlSession = SqlSessionUtil.getSqlSession(<span class="literal">false</span>);</span><br><span class="line">            <span class="comment">// 3.使用session对象调用方法获取接口Mapper对象</span></span><br><span class="line">            <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">            <span class="comment">//4.使用接口代理对象调用接口中的根据用户名查询的方法</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> mapper.queryUserByUserName(user.getUsername());</span><br><span class="line">            <span class="comment">//5.判断返回的User对象是否等于null</span></span><br><span class="line">            <span class="keyword">if</span> (u == <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//6.如果等于null,说明没有查到，可以注册，使用接口代理对象调用注册方法</span></span><br><span class="line">                mapper.register(user);<span class="comment">//这里传递的是user对象</span></span><br><span class="line">                <span class="comment">//7.提交事务</span></span><br><span class="line">                sqlSession.commit();</span><br><span class="line"></span><br><span class="line">                <span class="comment">//8.返回给web层true</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">//9.如果查询的用户对象不等于null,说明用户存在，不能注册，返回给web层false</span></span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">//10.释放资源</span></span><br><span class="line">                sqlSession.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>小结：</p>
<p>1.在业务层我们主要是先根据用户名查询用户是否存在，如果不存在在执行添加用户方法，存在则不添加。</p>
<p><strong>2.别忘记提交事务，增删改需要提交事务</strong></p>
<h6 id="3-3web层"><a href="#3-3web层" class="headerlink" title="3.3web层"></a>3.3web层</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.sh.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.itheima.sh.service.UserServiceImpl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/registerServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegisterServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(request, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//1.处理请求乱码</span></span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">//2.获取页面的数据</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="comment">//3.创建User对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        <span class="comment">//4.将获取的数据封装到User对象中</span></span><br><span class="line">        user.setUsername(username);</span><br><span class="line">        user.setPassword(password);</span><br><span class="line">        <span class="comment">//5.创建业务层对象</span></span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">        <span class="comment">//6.使用业务层对象调用注册方法，将User对象作为参数传递到业务层</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span> userService.register(user);</span><br><span class="line"></span><br><span class="line">        response.getWriter().print(result);</span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h6 id="3-4前端代码的编写"><a href="#3-4前端代码的编写" class="headerlink" title="3.4前端代码的编写"></a>3.4前端代码的编写</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">post</span>(<span class="string">&quot;/user/registerServlet&quot;</span>,<span class="string">`username=<span class="subst">$&#123;<span class="variable language_">this</span>.ruleForm.username&#125;</span>&amp;password=<span class="subst">$&#123;<span class="variable language_">this</span>.ruleForm.password&#125;</span>`</span>)</span><br><span class="line">                .<span class="title function_">then</span>(<span class="function"><span class="params">resp</span>=&gt;</span>&#123;</span><br><span class="line">                  <span class="keyword">if</span>(resp.<span class="property">data</span>)&#123;</span><br><span class="line">                     <span class="comment">//注册成功接收后台响应的数据是true,跳转到登录页面</span></span><br><span class="line">                     <span class="comment">/*</span></span><br><span class="line"><span class="comment">                       import login from &#x27;@/views/user/login&#x27;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                        #/login ===&gt;在router/index.js文件中有如下配置：</span></span><br><span class="line"><span class="comment">                         &#123;</span></span><br><span class="line"><span class="comment">                           path: &#x27;/login&#x27;, // 这里的/login就是浏览器地址栏上的路径即window.location.href=&quot;#/login&quot;;</span></span><br><span class="line"><span class="comment">                           name: &#x27;login&#x27;,</span></span><br><span class="line"><span class="comment">                           component: login</span></span><br><span class="line"><span class="comment">                         &#125;</span></span><br><span class="line"><span class="comment">                     */</span></span><br><span class="line">                     <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&quot;注册成功&quot;</span>);</span><br><span class="line">                     <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&quot;#/login&quot;</span>;</span><br><span class="line">                   &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                     <span class="comment">//注册失败接收后台响应的数据是false,在注册页面提示用户名已经存在</span></span><br><span class="line">                     <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;用户名已经存在，注册失败&quot;</span>);</span><br><span class="line">                   &#125;</span><br><span class="line"></span><br><span class="line">                &#125;);</span><br></pre></td></tr></table></figure>
<h1 id="回顾"><a href="#回顾" class="headerlink" title="回顾"></a>回顾</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># http协议</span></span><br><span class="line"><span class="bullet">1.</span> 超文本传输协议</span><br><span class="line"><span class="code">	  目前web领域最常用的协议</span></span><br><span class="line"><span class="code">2. 特点</span></span><br><span class="line"><span class="code">	1). 基于tcp, 面向连接, 安全</span></span><br><span class="line"><span class="code">	2). 基于请求-响应模型: 一次请求对应一次响应</span></span><br><span class="line"><span class="code">	3). 无状态,每次请求都相互独立,无法共享数据</span></span><br><span class="line"><span class="code">		I. 优点 : 速度快</span></span><br><span class="line"><span class="code">		II. 缺点 : 多次请求无法共享数据,需要其他技术弥补(会话技术)</span></span><br><span class="line"><span class="code">	4). http协议默认端口80(可以省略)	</span></span><br><span class="line"><span class="code">3. 内容</span></span><br><span class="line"><span class="code">	1). 请求数据(报文)</span></span><br><span class="line"><span class="code">		I. 请求行</span></span><br><span class="line"><span class="code">			请求方式, 请求地址, 协议	</span></span><br><span class="line"><span class="code">		II. 请求头</span></span><br><span class="line"><span class="code">			key : value</span></span><br><span class="line"><span class="code">		III. 请求体</span></span><br><span class="line"><span class="code">			用于post请求存放请求参数</span></span><br><span class="line"><span class="code">			get请求没有请求体,get请求参数在请求行中(在请求地址里)</span></span><br><span class="line"><span class="code">	2). 响应数据</span></span><br><span class="line"><span class="code">		I. 响应行</span></span><br><span class="line"><span class="code">			协议, 状态码(status code)</span></span><br><span class="line"><span class="code">				200 : 请求成功</span></span><br><span class="line"><span class="code">				404 : not found (请求地址错误)</span></span><br><span class="line"><span class="code">				500 : 服务器错误 </span></span><br><span class="line"><span class="code">				302 : 重定向</span></span><br><span class="line"><span class="code">		II. 响应头</span></span><br><span class="line"><span class="code">			key : value</span></span><br><span class="line"><span class="code">		III. 响应体</span></span><br><span class="line"><span class="code">			响应数据的正文</span></span><br></pre></td></tr></table></figure>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># tomcat</span></span><br><span class="line"><span class="bullet">1.</span> web服务器,apache出品的开源免费的软件</span><br><span class="line"><span class="code">		能够解析http协议</span></span><br><span class="line"><span class="code">		默认占用8080端口</span></span><br><span class="line"><span class="code">2. 基本使用</span></span><br><span class="line"><span class="code">	1). 启动 bin/startup.bat</span></span><br><span class="line"><span class="code">	2). 配置 </span></span><br><span class="line"><span class="code">		conf/server.xml(修改服务器设置,包括端口) </span></span><br><span class="line"><span class="code">		conf/web.xml(修改部署项目的设置)</span></span><br><span class="line"><span class="code">	3). 部署</span></span><br><span class="line"><span class="code">    	webapps目录下放war包</span></span><br><span class="line"><span class="code">    4). 查看日志</span></span><br><span class="line"><span class="code">    	logs目录</span></span><br><span class="line"><span class="code">3. idea中集成tomcat</span></span><br><span class="line"><span class="code"></span></span><br></pre></td></tr></table></figure>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Servlet</span></span><br><span class="line"><span class="bullet">1.</span> 服务器小程序, 需要运行web服务器上</span><br><span class="line"><span class="code">	 在java中的体现,是javaee的一种规范,类型为接口</span></span><br><span class="line"><span class="code">2. 执行原理</span></span><br><span class="line"><span class="code">	1). servlet对象是web服务器创建的</span></span><br><span class="line"><span class="code">	2). servlet的方法是web服务器调用的</span></span><br><span class="line"><span class="code">3. 生命周期方法</span></span><br><span class="line"><span class="code">	1). init</span></span><br><span class="line"><span class="code">	2). service</span></span><br><span class="line"><span class="code">	3). destroy</span></span><br><span class="line"><span class="code">	4). 启动加载 : loadOnStartup &gt;= 0</span></span><br><span class="line"><span class="code">4. urlPattern</span></span><br><span class="line"><span class="code">	1). 精准匹配</span></span><br><span class="line"><span class="code">	2). 目录匹配</span></span><br><span class="line"><span class="code">	3). 扩展名匹配</span></span><br><span class="line"><span class="code">	4). 缺省匹配</span></span><br><span class="line"><span class="code">5. servlet的配置方式</span></span><br><span class="line"><span class="code">	1). 注解配置 WebServlet</span></span><br><span class="line"><span class="code">	2). xml配置 (web.xml)</span></span><br></pre></td></tr></table></figure>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Request</span></span><br><span class="line"><span class="bullet">1.</span> 是什么: 表示请求数据, 浏览器发送给服务器的是数据</span><br><span class="line"><span class="bullet">2.</span> 为什么:</span><br><span class="line"><span class="code">	1). 见名知意</span></span><br><span class="line"><span class="code">	2). request对象是由tomcat创建的,tomcat会解析浏览器发送过来的数据,并封装到request对象中	</span></span><br><span class="line"><span class="code">3. 怎么办:</span></span><br><span class="line"><span class="code">	1). 我们(servlet开发者)可以通过request对象获取请求数据</span></span><br><span class="line"><span class="code">		I. 请求行</span></span><br><span class="line"><span class="code">			a. 内容 : 请求方式, 请求地址, 请求协议</span></span><br><span class="line"><span class="code">			b. 请求方式: get/post</span></span><br><span class="line"><span class="code">			c. get的请求参数在请求地址中</span></span><br><span class="line"><span class="code">			d. API : </span></span><br><span class="line"><span class="code">				</span></span><br><span class="line"><span class="code">		II. 请求头</span></span><br><span class="line"><span class="code">			a. 格式 key : value</span></span><br><span class="line"><span class="code">			b. 请求头 user-agent (用户代理: 用户操作系统和浏览器)</span></span><br><span class="line"><span class="code">			c. API</span></span><br><span class="line"><span class="code">				String value = request.getHeader(&quot;user-agent&quot;);</span></span><br><span class="line"><span class="code">		III. 请求体</span></span><br><span class="line"><span class="code">			a. post请求参数在这里,get没有请求体</span></span><br><span class="line"><span class="code">		</span></span><br><span class="line"><span class="code">        IV. 通用的获取请求参数的API</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code">        V. 请求参数中文乱码</span></span><br><span class="line"><span class="code">        	a. 现象</span></span><br><span class="line"><span class="code">        		tomcat7</span></span><br><span class="line"><span class="code">        		tomcat8</span></span><br><span class="line"><span class="code">        	b. 原因</span></span><br><span class="line"><span class="code">            c. 解决方案</span></span><br><span class="line"><span class="code">	2). 我们可以通过request对象实现请求转发	</span></span><br><span class="line"><span class="code">		I. 是服务器内部的一种资源跳转方式(资源包括html,Servlet)</span></span><br><span class="line"><span class="code">		II. 特点</span></span><br><span class="line"><span class="code">			a. 就只有一次请求,可以通过request域对象共享数据</span></span><br><span class="line"><span class="code">			b. 地址栏不会变化</span></span><br><span class="line"><span class="code">			c. 只能跳转服务器内部的其他资源</span></span><br><span class="line"><span class="code">		III. API</span></span><br><span class="line"><span class="code">        </span></span><br><span class="line"><span class="code"></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># Response</span></span><br><span class="line"><span class="bullet">1.</span> 是什么 : 表示响应数据, 服务器发送给浏览器的数据</span><br><span class="line"><span class="bullet">2.</span> 为什么 : </span><br><span class="line"><span class="code">		response对象是tomcat创建的</span></span><br><span class="line"><span class="code">3. 怎么办</span></span><br><span class="line"><span class="code">	1). 我们可以通过response设置响应数据</span></span><br><span class="line"><span class="code">		I. 响应行 </span></span><br><span class="line"><span class="code">			a. 内容: 协议,状态码</span></span><br><span class="line"><span class="code">			b. 常见状态码(status code)</span></span><br><span class="line"><span class="code">				200</span></span><br><span class="line"><span class="code">				302</span></span><br><span class="line"><span class="code">				404</span></span><br><span class="line"><span class="code">				500</span></span><br><span class="line"><span class="code">			c. 通常情况下,tomcat会设置状态码,只有重定向才需要手动设置	</span></span><br><span class="line"><span class="code">		II. 响应头</span></span><br><span class="line"><span class="code">			a. 格式  key:value</span></span><br><span class="line"><span class="code">			b. location : 重定向时指定资源位置的</span></span><br><span class="line"><span class="code">			c. content-type : 可以用来防止响应体中文字符乱码的</span></span><br><span class="line"><span class="code">		III. 响应体</span></span><br><span class="line"><span class="code">			a. 字符输出流</span></span><br><span class="line"><span class="code">			b. 字节输出流</span></span><br><span class="line"><span class="code">	2). 重定向功能</span></span><br><span class="line"><span class="code">		I. 是一种资源跳转方式</span></span><br><span class="line"><span class="code">		II. 特点:</span></span><br><span class="line"><span class="code">			a. 起码两次请求,不可以通过request域对象共享数据</span></span><br><span class="line"><span class="code">			b. 地址栏会发生变化</span></span><br><span class="line"><span class="code">			c. 可以实现任意位置资源跳转,无论服务器内部还是外部</span></span><br><span class="line"><span class="code">	3). 响应字符/字节数据</span></span><br><span class="line"><span class="code">		</span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">JLY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/posts/3c95784c.html">http://example.com/posts/3c95784c.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">JLY的小窝</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaWeb/">JavaWeb</a><a class="post-meta__tags" href="/tags/Request/">Request</a><a class="post-meta__tags" href="/tags/Response/">Response</a></div><div class="post_share"><div class="social-share" data-image="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/6926a6804791b98c4ebe166af1429b1c.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/fb60fea1.html" title="Java Web"><img class="cover" src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/39e111bb2405cdb9668ea0895adebe3b.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java Web</div></div></a></div><div class="next-post pull-right"><a href="/posts/d28b8a6d.html" title="Cookie &amp;&amp; Session"><img class="cover" src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/b8569accbc346130a3fc21c58b1899e3.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Cookie &amp;&amp; Session</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/be4eff35.html" title="Filter &amp;&amp; Listener"><img class="cover" src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/39e111bb2405cdb9668ea0895adebe3b.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-14</div><div class="title">Filter &amp;&amp; Listener</div></div></a></div><div><a href="/posts/d28b8a6d.html" title="Cookie &amp;&amp; Session"><img class="cover" src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/b8569accbc346130a3fc21c58b1899e3.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-14</div><div class="title">Cookie &amp;&amp; Session</div></div></a></div><div><a href="/posts/fb60fea1.html" title="Java Web"><img class="cover" src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/39e111bb2405cdb9668ea0895adebe3b.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-14</div><div class="title">Java Web</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">JLY</div><div class="author-info__description">这是一个分享美好事物的地方。</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">19</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jialuyu1102"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/jialuyu1102" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:jialuyu1102@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">2024/08/04, JLY的小站成立啦!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Request%E5%92%8CResponse%E7%9A%84%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">1.Request和Response的概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Request%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.</span> <span class="toc-text">2.Request对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-Request%E7%BB%A7%E6%89%BF%E4%BD%93%E7%B3%BB"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Request继承体系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-Request%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 Request获取请求数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E8%A1%8C%E6%95%B0%E6%8D%AE"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1 获取请求行数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%A4%B4%E6%95%B0%E6%8D%AE"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2 获取请求头数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E4%BD%93%E6%95%B0%E6%8D%AE"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3 获取请求体数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-%E8%8E%B7%E5%8F%96%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E7%9A%84%E9%80%9A%E7%94%A8%E6%96%B9%E5%BC%8F-%E5%BE%88%E9%87%8D%E8%A6%81"><span class="toc-number">2.2.4.</span> <span class="toc-text">2.2.4 获取请求参数的通用方式(很重要)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E8%A7%A3%E5%86%B3post%E8%AF%B7%E6%B1%82%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98-%E6%8E%8C%E6%8F%A1"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 解决post请求乱码问题 掌握</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87"><span class="toc-number">2.3.1.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3"><span class="toc-number">2.3.2.</span> <span class="toc-text">内容讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%B0%8F%E7%BB%93"><span class="toc-number">2.3.3.</span> <span class="toc-text">内容小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-Request%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91-%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%90%8E%E4%BD%BF%E7%94%A8%E8%BE%83%E5%B0%91%EF%BC%8C%E9%9D%A2%E8%AF%95%E8%80%83"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 Request请求转发(前后端分离后使用较少，面试考)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5request%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.5.</span> <span class="toc-text">2.5request的生命周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-HTTP%E5%93%8D%E5%BA%94%E8%AF%A6%E8%A7%A3-%E7%90%86%E8%A7%A3"><span class="toc-number">3.</span> <span class="toc-text">3.HTTP响应详解(理解)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8%E6%8A%93%E5%8C%85%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE%E5%86%85%E5%AE%B9"><span class="toc-number">3.1.</span> <span class="toc-text">1.使用抓包查看响应报文协议内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-1"><span class="toc-number">3.1.1.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3-1"><span class="toc-number">3.1.2.</span> <span class="toc-text">内容讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%B0%8F%E7%BB%93-1"><span class="toc-number">3.1.3.</span> <span class="toc-text">内容小结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.2.</span> <span class="toc-text">2.HTTP响应报文协议介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-2"><span class="toc-number">3.2.1.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3-2"><span class="toc-number">3.2.2.</span> <span class="toc-text">内容讲解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%B0%8F%E7%BB%93-2"><span class="toc-number">3.2.3.</span> <span class="toc-text">内容小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-Response%E5%AF%B9%E8%B1%A1"><span class="toc-number">4.</span> <span class="toc-text">4.Response对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Response%E5%AF%B9%E8%B1%A1%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.1.</span> <span class="toc-text">1 Response对象介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Response%E8%AE%BE%E7%BD%AE%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.2.</span> <span class="toc-text">2 Response设置响应数据功能介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Respones%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.3.</span> <span class="toc-text">3 Respones请求重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98"><span class="toc-number">4.4.</span> <span class="toc-text">4 路径问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Response%E5%93%8D%E5%BA%94%E5%AD%97%E7%AC%A6%E6%95%B0%E6%8D%AE"><span class="toc-number">4.5.</span> <span class="toc-text">5 Response响应字符数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Response%E5%93%8D%E5%BA%94%E5%AD%97%E8%8A%82%E6%95%B0%E6%8D%AE"><span class="toc-number">4.6.</span> <span class="toc-text">6 Response响应字节数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E6%A1%88%E4%BE%8B"><span class="toc-number">5.</span> <span class="toc-text">5.用户注册登录案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-0%E6%A1%88%E4%BE%8B%E8%AF%B4%E6%98%8E"><span class="toc-number">5.1.</span> <span class="toc-text">5.0案例说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"><span class="toc-number">5.2.</span> <span class="toc-text">5.1 用户登录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%99%BB%E5%BD%95%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90"><span class="toc-number">5.2.1.</span> <span class="toc-text">1.登录案例分析</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-3"><span class="toc-number">5.2.1.1.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3-3"><span class="toc-number">5.2.1.2.</span> <span class="toc-text">内容讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-number">5.2.1.2.1.</span> <span class="toc-text">1.开发步骤</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E7%94%BB%E6%B5%81%E7%A8%8B%E5%BC%80%E5%8F%91%E5%9B%BE"><span class="toc-number">5.2.1.2.2.</span> <span class="toc-text">2.画流程开发图</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%A0%B9%E6%8D%AE%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81"><span class="toc-number">5.2.2.</span> <span class="toc-text">2.根据流程图编写代码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-dao%E5%B1%82%E4%BB%A3%E7%A0%81%E7%9A%84%E7%BC%96%E5%86%99"><span class="toc-number">5.2.2.1.</span> <span class="toc-text">1.dao层代码的编写</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-4"><span class="toc-number">5.2.2.1.1.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3-4"><span class="toc-number">5.2.2.1.2.</span> <span class="toc-text">内容讲解</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%B0%8F%E7%BB%93-3"><span class="toc-number">5.2.2.1.3.</span> <span class="toc-text">内容小结</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-service%E5%B1%82%E4%BB%A3%E7%A0%81%E7%9A%84%E7%BC%96%E5%86%99"><span class="toc-number">5.2.2.2.</span> <span class="toc-text">2.service层代码的编写</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-5"><span class="toc-number">5.2.2.2.1.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3-5"><span class="toc-number">5.2.2.2.2.</span> <span class="toc-text">内容讲解</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E5%B0%8F%E7%BB%93-4"><span class="toc-number">5.2.2.2.3.</span> <span class="toc-text">内容小结</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-web%E5%B1%82%E4%BB%A3%E7%A0%81%E7%9A%84%E7%BC%96%E5%86%99"><span class="toc-number">5.2.2.3.</span> <span class="toc-text">3.web层代码的编写</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-6"><span class="toc-number">5.2.2.3.1.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3-6"><span class="toc-number">5.2.2.3.2.</span> <span class="toc-text">内容讲解</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%9A%84%E7%BC%96%E5%86%99"><span class="toc-number">5.2.3.</span> <span class="toc-text">4.前端代码的编写</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E7%94%A8%E6%88%B7%E6%B3%A8%E5%86%8C"><span class="toc-number">5.3.</span> <span class="toc-text">5.2 用户注册</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87-7"><span class="toc-number">5.3.1.</span> <span class="toc-text">学习目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E5%AE%B9%E8%AE%B2%E8%A7%A3-7"><span class="toc-number">5.3.2.</span> <span class="toc-text">内容讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-1"><span class="toc-number">5.3.2.1.</span> <span class="toc-text">1.开发步骤</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%94%BB%E6%B3%A8%E5%86%8C%E6%B5%81%E7%A8%8B%E5%9B%BE"><span class="toc-number">5.3.2.2.</span> <span class="toc-text">2.画注册流程图</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E6%A0%B9%E6%8D%AE%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%BC%96%E5%86%99%E4%BB%A3%E7%A0%81"><span class="toc-number">5.3.2.3.</span> <span class="toc-text">3.根据流程图编写代码</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#3-1dao%E5%B1%82"><span class="toc-number">5.3.2.3.1.</span> <span class="toc-text">3.1dao层</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-2service%E5%B1%82"><span class="toc-number">5.3.2.3.2.</span> <span class="toc-text">3.2service层</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-3web%E5%B1%82"><span class="toc-number">5.3.2.3.3.</span> <span class="toc-text">3.3web层</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-4%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%9A%84%E7%BC%96%E5%86%99"><span class="toc-number">5.3.2.3.4.</span> <span class="toc-text">3.4前端代码的编写</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9E%E9%A1%BE"><span class="toc-number"></span> <span class="toc-text">回顾</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number"></span> <span class="toc-text">总结</span></a></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/69c3279c.html" title="Git"><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/1e116798c6081a44ef476551aeddd850.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git"/></a><div class="content"><a class="title" href="/posts/69c3279c.html" title="Git">Git</a><time datetime="2024-08-14T12:58:07.000Z" title="发表于 2024-08-14 20:58:07">2024-08-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/be4eff35.html" title="Filter &amp;&amp; Listener"><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/39e111bb2405cdb9668ea0895adebe3b.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Filter &amp;&amp; Listener"/></a><div class="content"><a class="title" href="/posts/be4eff35.html" title="Filter &amp;&amp; Listener">Filter &amp;&amp; Listener</a><time datetime="2024-08-14T11:54:05.000Z" title="发表于 2024-08-14 19:54:05">2024-08-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d28b8a6d.html" title="Cookie &amp;&amp; Session"><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/b8569accbc346130a3fc21c58b1899e3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Cookie &amp;&amp; Session"/></a><div class="content"><a class="title" href="/posts/d28b8a6d.html" title="Cookie &amp;&amp; Session">Cookie &amp;&amp; Session</a><time datetime="2024-08-14T11:50:32.000Z" title="发表于 2024-08-14 19:50:32">2024-08-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3c95784c.html" title="Request &amp;&amp; Response"><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/6926a6804791b98c4ebe166af1429b1c.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Request &amp;&amp; Response"/></a><div class="content"><a class="title" href="/posts/3c95784c.html" title="Request &amp;&amp; Response">Request &amp;&amp; Response</a><time datetime="2024-08-14T11:44:46.000Z" title="发表于 2024-08-14 19:44:46">2024-08-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/fb60fea1.html" title="Java Web"><img src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/39e111bb2405cdb9668ea0895adebe3b.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java Web"/></a><div class="content"><a class="title" href="/posts/fb60fea1.html" title="Java Web">Java Web</a><time datetime="2024-08-14T11:20:33.000Z" title="发表于 2024-08-14 19:20:33">2024-08-14</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2024 By JLY</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-show-text.min.js" data-mobile="false" data-text="I,LOVE,YOU" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover1.webp);"> <a class="categoryBar-list-link" href="categories/Java技术栈/">Java技术栈</a><span class="categoryBar-list-count">16</span><span class="categoryBar-list-descr">学习笔记1</span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover2.webp);"> <a class="categoryBar-list-link" href="categories/学习笔记1/">学习笔记1</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">学习笔记2</span></li><li class="categoryBar-list-item" style="background:url(https://npm.elemecdn.com/akilar-candyassets/image/cover3.webp);"> <a class="categoryBar-list-link" href="categories/学习笔记2/">学习笔记2</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr">学习笔记3</span></li><li class="categoryBar-list-item" style="background:url(undefined);"> <a class="categoryBar-list-link" href="categories/学习笔记3/">学习笔记3</a><span class="categoryBar-list-count">1</span><span class="categoryBar-list-descr"></span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/4a17b156.html" alt=""><img width="48" height="48" src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/9381ec82397b0ec0ec1ff44fbeb26a75.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-04</span><a class="blog-slider__title" href="posts/4a17b156.html" alt="">Hello World</a><div class="blog-slider__text">hello-world</div><a class="blog-slider__button" href="posts/4a17b156.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/f965df95.html" alt=""><img width="48" height="48" src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/b8569accbc346130a3fc21c58b1899e3.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-05</span><a class="blog-slider__title" href="posts/f965df95.html" alt="">moudle</a><div class="blog-slider__text">文章模板</div><a class="blog-slider__button" href="posts/f965df95.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="posts/8ed2565f.html" alt=""><img width="48" height="48" src="https://yu-1312265541.cos.ap-nanjing.myqcloud.com/imgs/852513f5970b000c44741ea6751bbf4a.png" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-08-04</span><a class="blog-slider__title" href="posts/8ed2565f.html" alt="">newPost</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="posts/8ed2565f.html" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --></body></html>